#include extensions_linkus.conf

[general]
static = yes
writeprotect = no
autofallthrough = yes
clearglobalvars = yes
priorityjumping = no
extenpatternmatchnew = no

[globals]
TOUCH_MONITOR_FORMAT = wav
TOUCH_MIXMONITOR_FORMAT = wav
DIALOPTIONS = tTKkWwXx
PRESS5TOLEVMSG_ENABLE = 0
ABSOLUTE_TIMEOUT = 6000
RINGTIME = 30
RINGTIME_2 = 10
TRANSFER_INCOMING_CALLERID = transfer

trunk_UMTS1 = YSGSM/g2
trunk_UMTS1_DIALOPT = r
trunk_UMTS1_MODE=GSM
trunk-sipnet.ru-endpoint = PJSIP
t38support_trunk-sipnet.ru-endpoint = no
trunk-sipnet.ru-endpoint_MODE = SIPVP
trunk-sipnet.ru-endpoint_DOMAIN = sipnet.ru
trunk-DUMMY_Trunk-endpoint = PJSIP
t38support_trunk-DUMMY_Trunk-endpoint = no
trunk-DUMMY_Trunk-endpoint_MODE = SIPSPS
trunk-DUMMY_Trunk-endpoint_DOMAIN = DUMMY_Trunk
trunk-PBX_Branch-endpoint = PJSIP
t38support_trunk-PBX_Branch-endpoint = no
trunk-PBX_Branch-endpoint_MODE = SIPSPS
trunk-PBX_Branch-endpoint_DOMAIN = 192.168.254.225

DIALPARAM_OF_EXTEN1000=PJSIP/1000
DIALPARAM_OF_EXTEN1001=PJSIP/1001
DIALPARAM_OF_EXTEN1002=PJSIP/1002
DIALPARAM_OF_EXTEN1003=PJSIP/1003
DIALPARAM_OF_EXTEN1004=PJSIP/1004
DIALPARAM_OF_EXTEN1005=PJSIP/1005
DIALPARAM_OF_EXTEN1006=PJSIP/1006
DIALPARAM_OF_EXTEN1007=PJSIP/1007
DIALPARAM_OF_EXTEN1008=PJSIP/1008
DIALPARAM_OF_EXTEN1009=PJSIP/1009
DIALPARAM_OF_EXTEN1010=PJSIP/1010
DIALPARAM_OF_EXTEN1011=PJSIP/1011
DIALPARAM_OF_EXTEN1012=PJSIP/1012
DIALPARAM_OF_EXTEN1013=PJSIP/1013
DIALPARAM_OF_EXTEN1014=PJSIP/1014
DIALPARAM_OF_EXTEN1015=PJSIP/1015
DIALPARAM_OF_EXTEN1016=PJSIP/1016
DIALPARAM_OF_EXTEN1017=PJSIP/1017
DIALPARAM_OF_EXTEN1018=PJSIP/1018
DIALPARAM_OF_EXTEN1019=PJSIP/1019
DIALPARAM_OF_EXTEN1020=PJSIP/1020
DIALPARAM_OF_EXTEN1021=PJSIP/1021
DIALPARAM_OF_EXTEN1022=PJSIP/1022
DIALPARAM_OF_EXTEN1023=PJSIP/1023
DIALPARAM_OF_EXTEN1024=PJSIP/1024
DIALPARAM_OF_EXTEN1025=PJSIP/1025
DIALPARAM_OF_EXTEN1026=PJSIP/1026
DIALPARAM_OF_EXTEN1027=PJSIP/1027
DIALPARAM_OF_EXTEN1028=PJSIP/1028
DIALPARAM_OF_EXTEN1029=PJSIP/1029
DIALPARAM_OF_EXTEN1030=PJSIP/1030
DIALPARAM_OF_EXTEN1031=PJSIP/1031
DIALPARAM_OF_EXTEN1032=PJSIP/1032
DIALPARAM_OF_EXTEN1033=PJSIP/1033
DIALPARAM_OF_EXTEN1034=PJSIP/1034
DIALPARAM_OF_EXTEN1035=PJSIP/1035
DIALPARAM_OF_EXTEN1036=PJSIP/1036
DIALPARAM_OF_EXTEN1037=PJSIP/1037
DIALPARAM_OF_EXTEN1038=PJSIP/1038
DIALPARAM_OF_EXTEN1039=PJSIP/1039
DIALPARAM_OF_EXTEN1040=PJSIP/1040
DIALPARAM_OF_EXTEN1041=PJSIP/1041
DIALPARAM_OF_EXTEN1042=PJSIP/1042
DIALPARAM_OF_EXTEN1043=PJSIP/1043
DIALPARAM_OF_EXTEN1044=PJSIP/1044
DIALPARAM_OF_EXTEN1045=PJSIP/1045&DAHDI/8

RINGTIME_1000 = 30
RINGINGPRIORITY_1000 = 1
RINGTIME_1001 = 30
RINGINGPRIORITY_1001 = 1
RINGTIME_1002 = 30
RINGINGPRIORITY_1002 = 1
RINGTIME_1003 = 30
RINGINGPRIORITY_1003 = 1
RINGTIME_1004 = 30
RINGINGPRIORITY_1004 = 1
RINGTIME_1005 = 30
RINGINGPRIORITY_1005 = 1
RINGTIME_1006 = 30
RINGINGPRIORITY_1006 = 1
RINGTIME_1007 = 30
RINGINGPRIORITY_1007 = 1
RINGTIME_1008 = 30
RINGINGPRIORITY_1008 = 1
RINGTIME_1009 = 30
RINGINGPRIORITY_1009 = 1
RINGTIME_1010 = 30
RINGINGPRIORITY_1010 = 1
RINGTIME_1011 = 30
RINGINGPRIORITY_1011 = 1
RINGTIME_1012 = 30
RINGINGPRIORITY_1012 = 1
RINGTIME_1013 = 30
RINGINGPRIORITY_1013 = 1
RINGTIME_1014 = 30
RINGINGPRIORITY_1014 = 1
RINGTIME_1015 = 30
RINGINGPRIORITY_1015 = 1
RINGTIME_1016 = 30
RINGINGPRIORITY_1016 = 1
RINGTIME_1017 = 30
RINGINGPRIORITY_1017 = 1
RINGTIME_1018 = 30
RINGINGPRIORITY_1018 = 1
RINGTIME_1019 = 30
RINGINGPRIORITY_1019 = 1
RINGTIME_1020 = 30
RINGINGPRIORITY_1020 = 1
RINGTIME_1021 = 30
RINGINGPRIORITY_1021 = 1
RINGTIME_1022 = 30
RINGINGPRIORITY_1022 = 1
RINGTIME_1023 = 30
RINGINGPRIORITY_1023 = 1
RINGTIME_1024 = 30
RINGINGPRIORITY_1024 = 1
RINGTIME_1025 = 30
RINGINGPRIORITY_1025 = 1
RINGTIME_1026 = 30
RINGINGPRIORITY_1026 = 1
RINGTIME_1027 = 30
RINGINGPRIORITY_1027 = 1
RINGTIME_1028 = 30
RINGINGPRIORITY_1028 = 1
RINGTIME_1029 = 30
RINGINGPRIORITY_1029 = 1
RINGTIME_1030 = 30
RINGINGPRIORITY_1030 = 1
RINGTIME_1031 = 30
RINGINGPRIORITY_1031 = 1
RINGTIME_1032 = 30
RINGINGPRIORITY_1032 = 1
RINGTIME_1033 = 30
RINGINGPRIORITY_1033 = 1
RINGTIME_1034 = 30
RINGINGPRIORITY_1034 = 1
RINGTIME_1035 = 30
RINGINGPRIORITY_1035 = 1
RINGTIME_1036 = 30
RINGINGPRIORITY_1036 = 1
RINGTIME_1037 = 30
RINGINGPRIORITY_1037 = 1
RINGTIME_1038 = 30
RINGINGPRIORITY_1038 = 1
RINGTIME_1039 = 30
RINGINGPRIORITY_1039 = 1
RINGTIME_1040 = 30
RINGINGPRIORITY_1040 = 1
RINGTIME_1041 = 30
RINGINGPRIORITY_1041 = 1
RINGTIME_1042 = 30
RINGINGPRIORITY_1042 = 1
RINGTIME_1043 = 30
RINGINGPRIORITY_1043 = 1
RINGTIME_1044 = 30
RINGINGPRIORITY_1044 = 1
RINGTIME_1045 = 30
RINGINGPRIORITY_1045 = 1
RINGTIME_GLOBAL = 30

EMAILADDR_1000 = support@ipmatika.ru


[Local_Default_CallingRules]
include = sla_stations
include = reset_followme
include = enable_followme_always
include = disable_followme_always
include = enable_followme_noanswer
include = disable_followme_noanswer
include = enable_followme_busy
include = disable_followme_busy
include = enable_dnd
include = disable_dnd
include = vmm
include = en-force-to-outside
include = dis-force-to-outside
include = en-force-to-inside
include = force-to-businesshours
include = parkedcalls
include = conferences
include = ringgroups
include = ivrs
include = queues
include = voicemailgroups
include = pagegroups
include = page_an_extension
include = pickup_extension
include = speeddial
include = exten_dial_config
include = extension-white-and-black-outbound
include = inrouter_feature_dest
include = emergency-number
include = default

[dial-by-name]
exten = s,1,Directory(interdirectory,default,ef)
exten = s,n,Hangup()

[macro-stdexten]
exten = s,1,Set(IsFromOutside=0)
exten = s,n,Gotoif($[${LEN(${FromSystemAlert})}>0]?sys-dial,1)
exten = s,n,Gotoif($[${LEN(${BCBTYPE})}>0]?set:noset)
exten = s,n(set),Set(CALLERID(num)=${SRCEXTENSION})
exten = s,n,Set(CALLERID(name)=${SRCEXTENSION})
exten = s,n(noset),Set(CHECKCALLERNUM=${CALLERID(num)})
exten = s,n(noset),Macro(realstexten,${ARG1},${DIALPARAM_OF_EXTEN${ARG1}},${DIALOPTIONS})
exten = sys-dial,1,Set(CHECKCALLERNUM=${CALLERID(num)})
exten = sys-dial,2,Macro(sysdial,${DIALPARAM_OF_EXTEN${ARG1}},${RINGTIME},${DIALOPTIONS})
[macro-stdexten-fromoutside]
exten = s,1,Set(IsFromOutside=1)
exten = s,n,Macro(realstexten,${ARG1},${ARG2},${DIALOPTIONS})
[macro-realstexten]
exten = s,1,Set(CHECKCALLERNUM=${IF(${LEN(${CHECKCALLERNUM})>0}?${CHECKCALLERNUM}:${CALLERID(num)})})
exten = s,n,Set(DYNAMIC_FEATURES=twstart)
exten = s,n,Set(TIMEOUT(absolute)=${ABSOLUTE_TIMEOUT})
exten = s,n,Set(CKTSETTRANSFER=0)
exten = s,n,YsWalkContext(whitelist-internal,${ARG1},1,${CALLERID(num)},internal)
exten = s,n,Set(CALLERID(num)=${CHECKCALLERNUM})
exten = s,n,Gotoif(${DB(CFA/${ARG1})}>0?follow-me-always,1)
exten = s,n,Gotoif(${DB(DND/${ARG1})}>0?vm-u,1)
exten = s,n,CktStdCall(srtpfor,${ARG2},novalue)
exten = s,n,NoOp(NO CLIP)
exten = s,n,Dial(${ARG2},${RINGTIME_${ARG1}},${ARG3}${RINGTONE},,${RINGINGPRIORITY_${ARG1}})
exten = s,n,Gotoif(${LEN(${CONFER_INVITER})}>1?1-out,1)
exten = s,n,Goto(s-${DIALSTATUS},1)
exten = s-ANSWER,1,Hangup()
exten = s-NOANSWER,1,Gotoif(${DB(CFN/${ARG1})}>0?follow-me-noanswer,1:2-out,1)
exten = s-BUSY,1,Gotoif(${DB(CFB/${ARG1})}>0?follow-me-busy,1:1-out,1)
exten = cktcheck,1,Set(CKTSETTRANSFER=0)
exten = cktcheck,4,Hangup()
exten = _s-.,1,Gotoif(${CKTSETTRANSFER}>0?cktcheck,1)
exten = _s-.,n,Goto(s-NOANSWER,1)
exten = follow-me-always,1,Gotoif(${DB(ACFD/${ARG1})}>0?vm-u,1)
exten = follow-me-always,2,Set(CFNUM=${DB(CFANUM/${ARG1})})
exten = follow-me-always,3,Gotoif($[${LEN(${CFNUM})}<1]?vm-u,1))
exten = follow-me-always,4,Gotoif($["${CFNUM}" = "${ARG1}"]?vm-u,1)
exten = follow-me-always,5,Set(IsFollowme=${IF($[${IsFromOutside} = 1]?1:0)})
exten = follow-me-always,6,Followme(${ARG1}-a,n)
exten = follow-me-always,7,Hangup()
exten = follow-me-noanswer,1,Gotoif(${DB(NCFD/${ARG1})}>0?vm-u,1)
exten = follow-me-noanswer,2,Set(CFNUM=${DB(CFNNUM/${ARG1})})
exten = follow-me-noanswer,3,Gotoif($[${LEN(${CFNUM})}<1]?vm-u,1))
exten = follow-me-noanswer,4,Gotoif($["${CFNUM}" = "${ARG1}"]?vm-u,1)
exten = follow-me-noanswer,5,Set(IsFollowme=${IF($[${IsFromOutside} = 1]?1:0)})
exten = follow-me-noanswer,6,Followme(${ARG1}-n,n)
exten = follow-me-noanswer,7,Hangup()
exten = follow-me-busy,1,Gotoif(${DB(BCFD/${ARG1})}>0?vm-b,1)
exten = follow-me-busy,2,Set(CFNUM=${DB(CFBNUM/${ARG1})})
exten = follow-me-busy,3,Gotoif($[${LEN(${CFNUM})}<1]?vm-b,1)
exten = follow-me-busy,4,Gotoif($["${CFNUM}" = "${ARG1}"]?vm-b,1)
exten = follow-me-busy,5,Set(IsFollowme=${IF($[${IsFromOutside} = 1]?1:0)})
exten = follow-me-busy,6,Followme(${ARG1}-b,n)
exten = follow-me-busy,7,Hangup()
exten = vm-u,1,Gotoif($[${PRESS5TOLEVMSG_ENABLE} = 1]?vm-u,2:vm-unavail,1)
exten = vm-u,n,Playback(vm-leavemsg)
exten = vm-u,n,Read(digito,,1,,,3)
exten = vm-u,n,Gotoif($[${digito}=5]?vm-s,1)
exten = vm-u,n,Playback(vm-leavemsg)
exten = vm-u,n,Read(digito,,1,,,4)
exten = vm-u,n,Gotoif($[${digito}=5]?vm-s,1)
exten = vm-u,n,Playback(vm-leavemsg)
exten = vm-u,n,Read(digito,,1,,,3)
exten = vm-u,n,Gotoif($[${digito}=5]?vm-s,1)
exten = vm-u,n,Hangup()
exten = vm-b,1,Gotoif($[${PRESS5TOLEVMSG_ENABLE} = 1]?vm-b,2:vm-busy,1)
exten = vm-b,n,Playback(vm-leavemsg)
exten = vm-b,n,Read(digito,,1,,,3)
exten = vm-b,n,Gotoif($[${digito}=5]?vm-s,1)
exten = vm-b,n,Playback(vm-leavemsg)
exten = vm-b,n,Read(digito,,1,,,4)
exten = vm-b,n,Gotoif($[${digito}=5]?vm-s,1)
exten = vm-b,n,Playback(vm-leavemsg)
exten = vm-b,n,Read(digito,,1,,,3)
exten = vm-b,n,Gotoif($[${digito}=5]?vm-s,1)
exten = vm-b,n,Hangup()
exten = vm-unavail,1,Voicemail(${ARG1},u)
exten = vm-unavail,n,Hangup()
exten = vm-busy,1,Voicemail(${ARG1},b)
exten = vm-busy,n,Hangup()
exten = vm-s,1,Voicemail(${ARG1},s)
exten = vm-s,n,Hangup()
exten = 1-out,1,Hangup()
exten = 2-out,1,Hangup(NO_ANSWER)

[macro-sysdial]
exten = s,1,Set(CALLERID(num)=Alarm)
exten = s,2,Set(CALLERID(name)=Alarm)
exten = s,3,Set(ARG2=28)
exten = s,4,Dial(${ARG1},${ARG2},${ARG3})
exten = s,5,Hangup()

[macro-trunkdial-failover-0.3]
exten = s,1,NOOP(do call out)
exten = s,2,Gotoif($[${LEN(${FromSystemAlert})}>0]?5:3)
exten = s,3,Gotoif($[${LEN(${ARG$[${ARG1}+4]})}>0]?4:5)
exten = s,4,Goto(s,5)
exten = s,5,Set(TCOUNT=4)
exten = s,n,Set(CDR(userfield)=Outbound)
exten = s,n,Set(OLDCALLERID=${IF($[${LEN(${SRCEXTENSION})} > 0]?${SRCEXTENSION}:${CALLERID(num)})})
exten = s,n,Set(TOUCH_MONITOR=${OLDCALLERID}-${ARG3})
exten = s,n,NOOP(${DOD_${ARG${TCOUNT}}_${SRCEXTENSION}})
exten = s,n,Set(TIMEOUT(absolute)=${IF($["${CALLMAXDURATION}" != ""]?${CALLMAXDURATION}:${ABSOLUTE_TIMEOUT})})
exten = s,n,Set(DLSTAT=UNKNOW})
exten = s,n,Gotoif(${ARG1}>0?1-dial,1)
exten = 1-dial,1,Gotoif($[$[${TCOUNT}-3]>${ARG1}]?nextrouter,1)
exten = 1-dial,2,Gotoif($[${LEN(${DOD_${ARG${TCOUNT}}_${SRCEXTENSION}})} > 0]?setdod,1:1-dial,3)
exten = 1-dial,3,Gotoif($[${LEN(${DOD_${ARG${TCOUNT}}_${CALLERID(num)}})} > 0]?setdodnum,1:1-dial,4)
exten = 1-dial,4,Set(CALLERID(name)=${IF($[${LEN(${CID_${ARG${TCOUNT}}})} > 0]?${CID_${ARG${TCOUNT}}}:${CALLERID(name)})})
exten = 1-dial,5,Set(CALLERID(num)=${IF($[${LEN(${CID_${ARG${TCOUNT}}})} > 0]?${CID_${ARG${TCOUNT}}}:${CALLERID(num)})})
exten = 1-dial,6,Set(OUTDIALOPT=${IF($[${LEN(${GSM_${ARG${TCOUNT}}})} > 0]?tTkKWwXxr:${DIALOPTIONS})})
exten = 1-dial,7,Set(FAXOPT(gateway)=${IF($[${${ARG${TCOUNT}}} = PJSIP]?${t38support_${ARG${TCOUNT}}}:no)})
exten = 1-dial,8,NoOp(NO CLIP)
exten = 1-dial,9,Set(PJSIP_TRUNK=${IF($[${${ARG${TCOUNT}}} = PJSIP]?@${ARG${TCOUNT}}:)})
exten = 1-dial,10,Set(YSGSM_TRUNK=${IF($[${REGEX("^YSGSM." ${${ARG${TCOUNT}}})} = 1]?@${ARG${TCOUNT}}:)})
exten = 1-dial,11,Set(DIALSTRING=${IF($[${LEN(${PJSIP_TRUNK})}>0]?${${ARG${TCOUNT}}}/${ARG2}${ARG3}${PJSIP_TRUNK}:${${ARG${TCOUNT}}}/${ARG2}${PREFIX_${ARG${TCOUNT}}}${ARG3})})
exten = 1-dial,12,Gotoif($[${LEN(${FromSystemAlert})}>0]?sys-dial,1)
exten = 1-dial,13,ExecIf($[${MRMEMORYHUNT}=yes]?SetGlobal(LastTrunkOf${ORGINROUTE}=${ARG${TCOUNT}}):Noop(Not Mrmemory Hunt))
exten = 1-dial,14,ExecIf($[${LEN(${PJSIP_TRUNK})}>0]?Set(JITTERBUFFER(disabled)=):NoOp(No Jitter Buffer))
exten = 1-dial,15,ExecIf($[${LEN(${YSGSM_TRUNK})}>0]?Set(JITTERBUFFER(disabled)=):NoOp(No Jitter Buffer))
exten = 1-dial,16,Gotoif($[${LEN(${${ARG${TCOUNT}}_LIMIT})}>0]?1-dial,17:1-dial,19)
exten = 1-dial,17,Set(GROUP()=${ARG${TCOUNT}})
exten = 1-dial,18,Gotoif($[${GROUP_COUNT()} > ${${ARG${TCOUNT}}_LIMIT}]?9-BUSY,1)
exten = 1-dial,19,Dial(${DIALSTRING},,${OUTDIALOPT}${${ARG${TCOUNT}}_DIALOPT})
exten = 1-dial,n,NOOP(${DIALSTATUS})
exten = 1-dial,n,Goto(1-${DIALSTATUS},1)
exten = sys-dial,1,Macro(sysdial,${DIALSTRING},,${OUTDIALOPT})
exten = setdod,1,Set(CALLERID(name)=${DOD_${ARG${TCOUNT}}_${SRCEXTENSION}})
exten = setdod,2,Set(CALLERID(num)=${DOD_${ARG${TCOUNT}}_${SRCEXTENSION}})
exten = setdod,3,Goto(1-dial,6)
exten = setdodnum,1,Set(CALLERID(name)=${DOD_${ARG${TCOUNT}}_${CALLERID(num)}})
exten = setdodnum,2,Set(CALLERID(num)=${DOD_${ARG${TCOUNT}}_${CALLERID(num)}})
exten = setdodnum,3,Goto(1-dial,6)
exten = 1-BUSY,1,Set(DLSTAT=9-${DIALSTATUS})
exten = 1-BUSY,2,Goto(${DLSTAT},1)
exten = 1-CHANUNAVAIL,1,Set(DLSTAT=9-${DIALSTATUS})
exten = 1-CHANUNAVAIL,2,Goto(addevent,1))
exten = 1-CONGESTION,1,Set(DLSTAT=9-${DIALSTATUS})
exten = 1-CONGESTION,2,Goto(addevent,1)
exten = 1-YSCHANUNAVAIL,1,Set(DLSTAT=9-${DIALSTATUS})
exten = 1-YSCHANUNAVAIL,2,Goto(2-dial,1)
exten = 1-NOANSWER,1,Set(DLSTAT=9-${DIALSTATUS})
exten = 1-NOANSWER,2,Hangup()
exten = 2-dial,1,Set(TCOUNT=$[${TCOUNT}+1])
exten = 2-dial,2,Goto(1-dial,1)
exten = 1-out,1,playback(all-busy-now-try-call-later)
exten = 1-out,2,Set(EVENTCONTEXT=provider=${ARG4}&destnumber=${ARG3}&srcnumber=${CALLERID(num)})
exten = 1-out,3,AGI(/ysbin/eventadd,2002,${EVENTCONTEXT})
exten = 1-out,4,Hangup()
exten = 9-BUSY,1,playback(record/)
exten = 9-BUSY,2,Hangup()
exten = 9-CHANUNAVAIL,1,playback(record/)
exten = 9-CHANUNAVAIL,2,Hangup()
exten = 9-YSCHANUNAVAIL,1,Goto(9-CONGESTION,3)
exten = 9-CONGESTION,1,Gotoif(${DB(BUSYCALLBACK/${SRCEXTENSION})}=1?2:3)
exten = 9-CONGESTION,2,AGI(/bin/busycallback,add,external,${SRCEXTENSION},${ORGINEXTEN},${ORGINROUTE})
exten = 9-CONGESTION,3,playback(record/)
exten = 9-CONGESTION,4,Hangup()
exten = nextrouter,1,Gotoif($[${LEN(${NEXTROUTER})} > 0]?${NEXTROUTER},${ORGINEXTEN},1:addevent,1)
exten = addevent,1,Gotoif($[${CALLERID(num)}==Alarm]?4:2)
exten = addevent,2,Set(EVENTCONTEXT=provider=${ARG4}&destnumber=${ARG3}&srcnumber=${CALLERID(num)})
exten = addevent,3,AGI(/ysbin/eventadd,2002,${EVENTCONTEXT})
exten = addevent,4,Goto(${DLSTAT},1)
exten = h,1,NOOP(no thing to do)
exten = add_header_diversion,1,Set(GlobalDiversion=${IF($[${LEN(${Diversion_trunk-${SRCTRUNKNAME}-endpoint})}>0]?${Diversion_trunk-${SRCTRUNKNAME}-endpoint}:${DiversionCALLERID})})
exten = add_header_diversion,2,Set(Diversion=${IF($[${LEN(${Diversion_trunk-${SRCTRUNKNAME}-endpoint_${DiversionCALLERID}})}>0]?${Diversion_trunk-${SRCTRUNKNAME}-endpoint_${DiversionCALLERID}}:${GlobalDiversion})})
exten = add_header_diversion,3,Set(PJSIP_HEADER(add,Diversion)="${Diversion}" <sip:${Diversion}@${trunk-${SRCTRUNKNAME}-endpoint_DOMAIN}>)

[macro-trunkdial-failover-0.4]
exten = s,1,Gotoif($[${ARG1}==0]?h,1:s,2)
exten = s,2,Set(TCOUNT=4)
exten = s,n,Set(CDR(userfield)=Outbound)
exten = s,n,Set(OLDCALLERID=${CALLERID(num)})
exten = s,n,Set(TOUCH_MONITOR=${OLDCALLERID}-${ARG3})
exten = s,n,NOOP(${DOD_${ARG${TCOUNT}}_${OLDCALLERID}})
exten = s,n,Set(TIMEOUT(absolute)=${RINGTIME_GLOBAL})
exten = s,n,Set(DLSTAT=UNKNOW})
exten = s,n,Gotoif(${ARG1}>0?1-dial,1)
exten = 1-dial,1,Gotoif($[$[${TCOUNT}-3]>${ARG1}]?nextrouter,1)
exten = 1-dial,2,Gotoif($["${IsTrunkInbound}" = "1"]?6:3)
exten = 1-dial,3,Gotoif($[${LEN(${DOD_${ARG${TCOUNT}}_${OLDCALLERID}})} > 2]?setdod,1:1-dial,4)
exten = 1-dial,4,Set(CALLERID(name)=${IF($[${LEN(${CID_${ARG${TCOUNT}}})} > 2]?${CID_${ARG${TCOUNT}}}:${CALLERID(name)})})
exten = 1-dial,5,Set(CALLERID(num)=${IF($[${LEN(${CID_${ARG${TCOUNT}}})} > 2]?${CID_${ARG${TCOUNT}}}:${CALLERID(num)})})
exten = 1-dial,6,Set(OUTDIALOPT=${IF($[${LEN(${GSM_${ARG${TCOUNT}}})} > 0]?tTkKWwXxr:${DIALOPTIONS})})
exten = 1-dial,7,Gotoif($[${LEN(${FromSystemAlert})}>0]?sys-dial,1)})
exten = 1-dial,8,Dial(${${ARG${TCOUNT}}}/${ARG2}${PREFIX_${ARG${TCOUNT}}}${ARG3},,${OUTDIALOPT})
exten = 1-dial,n,Goto(1-${DIALSTATUS},1)
exten = sys-dial,1,Macro(sysdial,${${ARG${TCOUNT}}}/${ARG2}${PREFIX_${ARG${TCOUNT}}}${ARG3},,${OUTDIALOPT})
exten = setdod,1,Set(CALLERID(name)=${DOD_${ARG${TCOUNT}}_${OLDCALLERID}})
exten = setdod,2,Set(CALLERID(num)=${DOD_${ARG${TCOUNT}}_${OLDCALLERID}})
exten = setdod,3,Goto(1-dial,5)
exten = 1-BUSY,1,Set(DLSTAT=9-${DIALSTATUS})
exten = 1-BUSY,2,Goto(2-dial,1)
exten = 1-CHANUNAVAIL,1,Set(DLSTAT=9-${DIALSTATUS})
exten = 1-CHANUNAVAIL,2,Goto(2-dial,1))
exten = 1-CONGESTION,1,Set(DLSTAT=9-${DIALSTATUS})
exten = 1-CONGESTION,2,Goto(2-dial,1)
exten = 1-NOANSWER,1,Set(DLSTAT=9-${DIALSTATUS})
exten = 1-NOANSWER,2,Hangup()
exten = 2-dial,1,Set(TCOUNT=$[${TCOUNT}+1])
exten = 2-dial,2,Goto(1-dial,1)
exten = nextrouter,1,Gotoif($[${LEN(${NEXTROUTER})} > 0]?${NEXTROUTER},${ORGINEXTEN},1)
exten = h,1,NOOP(no thing to do)

[pjsip-addheader]
exten = add_header,1,Set(PJSIP_HEADER(add,Alert-Info)=Ring Answer)
exten = add_header,n,Set(PJSIP_HEADER(add,Call-Info)=<uri>\;answer-after=0)

[macro-pagingintercom]
exten = s,1,Page(${ARG1},${ARG2}b(pjsip-addheader,add_header,1))
exten = s,n,Hangup

[always-Hangup]
exten = h,1,Hangup

[blacklist-handle]
exten = s,1,Answer()
exten = s,n,wait(1)
exten = s,n,playback(ss-noservice)
exten = s,n,Hangup()

[chanspy-invalid]
exten = s,1,Hangup

[voicemailgroups]

[directory]

[pri_income]

[macro-trunkdial-t38fax]
exten = s,1,Wait(1)
exten = s,2,Gotoif($[${LEN(${FromSystemAlert})}>0]?5:3)
exten = s,3,Gotoif($[${LEN(${ARG$[${ARG1}+4]})}>0]?4:5)
exten = s,4,Authenticate(${ARG$[${ARG1}+4]})
exten = s,5,Set(TCOUNT=4)
exten = s,n,Set(CDR(userfield)=Outbound)
exten = s,n,Set(TOUCH_MONITOR=${CALLERID(num)}-${ARG3})
exten = s,n,Set(FAXOPT(gateway)=yes)
exten = s,n,noop(${DOD_${ARG${TCOUNT}}_${CALLERID(num)}})
exten = s,n,Gotoif($[${LEN(${FromSystemAlert})}>0]?sys-dial,1)})
exten = s,n,Gotoif(${ARG1}>0?1-dial,1)
exten = 1-dial,1,Gotoif($[$[${TCOUNT}-3]>${ARG1}]?1-out,1)
exten = 1-dial,2,Gotoif($[${LEN(${DOD_${ARG${TCOUNT}}_${CALLERID(num)}})} > 2]?setdod,1:1-dial,3)
exten = 1-dial,3,Set(CALLERID(num)=${IF($[${LEN(${CID_${ARG${TCOUNT}}})} > 2]?${CID_${ARG${TCOUNT}}}:${CALLERID(num)})})
exten = 1-dial,4,Set(PJSIP_TRUNK=${IF($[${${ARG${TCOUNT}}} = PJSIP]?@${ARG${TCOUNT}}:)})
exten = 1-dial,5,Set(DIALSTRING=${IF($[${LEN(${PJSIP_TRUNK})}>0]?${${ARG${TCOUNT}}}/${ARG2}${ARG3}${PJSIP_TRUNK}:${${ARG${TCOUNT}}}/${ARG2}${PREFIX_${ARG${TCOUNT}}}${ARG3})})
exten = 1-dial,6,Dial(${DIALSTRING},,${OUTDIALOPT})
exten = 1-dial,7,Goto(1-${DIALSTATUS},1)
exten = sys-dial,1,Set(PJSIP_TRUNK=${IF($[${${ARG${TCOUNT}}} = PJSIP]?@${ARG${TCOUNT}}:)})
exten = sys-dial,2,Set(DIALSTRING=${IF($[${LEN(${PJSIP_TRUNK})}>0]?${${ARG${TCOUNT}}}/${ARG2}${ARG3}${PJSIP_TRUNK}:${${ARG${TCOUNT}}}/${ARG2}${PREFIX_${ARG${TCOUNT}}}${ARG3})})
exten = sys-dial,3,Macro(sysdial, ${DIALSTRING},,${OUTDIALOPT})
exten = setdod,1,Set(CALLERID(name)=${DOD_${ARG${TCOUNT}}_${CALLERID(num)}})
exten = setdod,2,Set(CALLERID(num)=${DOD_${ARG${TCOUNT}}_${CALLERID(num)}})
exten = setdod,3,Goto(1-dial,4)
exten = 1-BUSY,1,Goto(2-dial,1)
exten = 1-CHANUNAVAIL,1,Goto(2-dial,1))
exten = 1-CONGESTION,1,Goto(2-dial,1)
exten = 2-dial,1,Set(TCOUNT=$[${TCOUNT}+1])
exten = 2-dial,2,Goto(1-dial,1)
exten = 1-out,1,playback(all-busy-now-try-call-later)
exten = 1-out,2,Hangup()
exten = h,1,NOOP(no thing to do)

[asterisk_guitools]
exten = executecommand,1,System(${command})
exten = executecommand,n,Hangup()
exten = record_vmenu,1,Set(CHANNEL(language)=en)
exten = record_vmenu,n,Answer
exten = record_vmenu,n,Playback(record-start)
exten = record_vmenu,n,Record(${var1},,,kSt)
exten = record_vmenu,n,Set(CHANNEL(language)=en)
exten = record_vmenu,n,Playback(vm-saved)
exten = record_vmenu,n,Playback(vm-goodbye)
exten = record_vmenu,n,Hangup
exten = play_file,1,Answer
exten = play_file,n,Playback(${var1})
exten = play_file,n,Hangup
[Event_Alert]
exten = Warning,1,Answer
exten = Warning,n,Set(CALLERID(num)=ALARM)
exten = Warning,n,Set(CALLERID(name)=ALARM)
exten = Warning,n,Set(CDR(userfield)=Warning)
exten = Warning,n,Set(CHANNEL(language)=en)
exten = Warning,n,Playback(${SYSALERTPROMPT})
exten = Warning,n,Hangup
[alert_playback]
exten = play_file,1,Answer()
exten = play_file,2,Set(TLOOP=10)
exten = play_file,3,Set(CHANNEL(language)=en)
exten = play_file,4,Playback(${SYSALERTPROMPT})
exten = play_file,5,Set(TLOOP=$[${TLOOP}-1])
exten = play_file,6,Gotoif($[${TLOOP}==0]?play_file,6:play_file,3)
exten = play_file,7,Hangup()

[default]
include = exten_dial_config
include = hintcontext
exten = .,1,Goto(${EXTEN})
exten = _**.,1,VoiceMail(${EXTEN:2}@default,)
exten = _**.,2,hangup
exten = h,1,NOOP(no thing to do)
exten = h,2,Hangup()
exten = *2,1,VoiceMailMain(${SRCEXTENSION}@default)
exten = 1000,hint,PJSIP/1000
exten = 1001,hint,PJSIP/1001
exten = 1002,hint,PJSIP/1002
exten = 1003,hint,PJSIP/1003
exten = 1004,hint,PJSIP/1004
exten = 1005,hint,PJSIP/1005
exten = 1006,hint,PJSIP/1006
exten = 1007,hint,PJSIP/1007
exten = 1008,hint,PJSIP/1008
exten = 1009,hint,PJSIP/1009
exten = 1010,hint,PJSIP/1010
exten = 1011,hint,PJSIP/1011
exten = 1012,hint,PJSIP/1012
exten = 1013,hint,PJSIP/1013
exten = 1014,hint,PJSIP/1014
exten = 1015,hint,PJSIP/1015
exten = 1016,hint,PJSIP/1016
exten = 1017,hint,PJSIP/1017
exten = 1018,hint,PJSIP/1018
exten = 1019,hint,PJSIP/1019
exten = 1020,hint,PJSIP/1020
exten = 1021,hint,PJSIP/1021
exten = 1022,hint,PJSIP/1022
exten = 1023,hint,PJSIP/1023
exten = 1024,hint,PJSIP/1024
exten = 1025,hint,PJSIP/1025
exten = 1026,hint,PJSIP/1026
exten = 1027,hint,PJSIP/1027
exten = 1028,hint,PJSIP/1028
exten = 1029,hint,PJSIP/1029
exten = 1030,hint,PJSIP/1030
exten = 1031,hint,PJSIP/1031
exten = 1032,hint,PJSIP/1032
exten = 1033,hint,PJSIP/1033
exten = 1034,hint,PJSIP/1034
exten = 1035,hint,PJSIP/1035
exten = 1036,hint,PJSIP/1036
exten = 1037,hint,PJSIP/1037
exten = 1038,hint,PJSIP/1038
exten = 1039,hint,PJSIP/1039
exten = 1040,hint,PJSIP/1040
exten = 1041,hint,PJSIP/1041
exten = 1042,hint,PJSIP/1042
exten = 1043,hint,PJSIP/1043
exten = 1044,hint,PJSIP/1044
exten = 1045,hint,PJSIP/1045&DAHDI/8
exten = sipnet.ru,hint,PJSIP/trunk-sipnet.ru-endpoint
exten = DUMMY_Trunk,hint,PJSIP/trunk-DUMMY_Trunk-endpoint
exten = PBX_Branch,hint,PJSIP/trunk-PBX_Branch-endpoint
exten = UMTS1,hint,YSGSM/1

[exten_dial_config]
exten = 1000,1,Macro(stdexten,1000,DIALPARAM_OF_EXTEN1000,{DIALOPTIONS})
exten = 1001,1,Macro(stdexten,1001,DIALPARAM_OF_EXTEN1001,{DIALOPTIONS})
exten = 1002,1,Macro(stdexten,1002,DIALPARAM_OF_EXTEN1002,{DIALOPTIONS})
exten = 1003,1,Macro(stdexten,1003,DIALPARAM_OF_EXTEN1003,{DIALOPTIONS})
exten = 1004,1,Macro(stdexten,1004,DIALPARAM_OF_EXTEN1004,{DIALOPTIONS})
exten = 1005,1,Macro(stdexten,1005,DIALPARAM_OF_EXTEN1005,{DIALOPTIONS})
exten = 1006,1,Macro(stdexten,1006,DIALPARAM_OF_EXTEN1006,{DIALOPTIONS})
exten = 1007,1,Macro(stdexten,1007,DIALPARAM_OF_EXTEN1007,{DIALOPTIONS})
exten = 1008,1,Macro(stdexten,1008,DIALPARAM_OF_EXTEN1008,{DIALOPTIONS})
exten = 1009,1,Macro(stdexten,1009,DIALPARAM_OF_EXTEN1009,{DIALOPTIONS})
exten = 1010,1,Macro(stdexten,1010,DIALPARAM_OF_EXTEN1010,{DIALOPTIONS})
exten = 1011,1,Macro(stdexten,1011,DIALPARAM_OF_EXTEN1011,{DIALOPTIONS})
exten = 1012,1,Macro(stdexten,1012,DIALPARAM_OF_EXTEN1012,{DIALOPTIONS})
exten = 1013,1,Macro(stdexten,1013,DIALPARAM_OF_EXTEN1013,{DIALOPTIONS})
exten = 1014,1,Macro(stdexten,1014,DIALPARAM_OF_EXTEN1014,{DIALOPTIONS})
exten = 1015,1,Macro(stdexten,1015,DIALPARAM_OF_EXTEN1015,{DIALOPTIONS})
exten = 1016,1,Macro(stdexten,1016,DIALPARAM_OF_EXTEN1016,{DIALOPTIONS})
exten = 1017,1,Macro(stdexten,1017,DIALPARAM_OF_EXTEN1017,{DIALOPTIONS})
exten = 1018,1,Macro(stdexten,1018,DIALPARAM_OF_EXTEN1018,{DIALOPTIONS})
exten = 1019,1,Macro(stdexten,1019,DIALPARAM_OF_EXTEN1019,{DIALOPTIONS})
exten = 1020,1,Macro(stdexten,1020,DIALPARAM_OF_EXTEN1020,{DIALOPTIONS})
exten = 1021,1,Macro(stdexten,1021,DIALPARAM_OF_EXTEN1021,{DIALOPTIONS})
exten = 1022,1,Macro(stdexten,1022,DIALPARAM_OF_EXTEN1022,{DIALOPTIONS})
exten = 1023,1,Macro(stdexten,1023,DIALPARAM_OF_EXTEN1023,{DIALOPTIONS})
exten = 1024,1,Macro(stdexten,1024,DIALPARAM_OF_EXTEN1024,{DIALOPTIONS})
exten = 1025,1,Macro(stdexten,1025,DIALPARAM_OF_EXTEN1025,{DIALOPTIONS})
exten = 1026,1,Macro(stdexten,1026,DIALPARAM_OF_EXTEN1026,{DIALOPTIONS})
exten = 1027,1,Macro(stdexten,1027,DIALPARAM_OF_EXTEN1027,{DIALOPTIONS})
exten = 1028,1,Macro(stdexten,1028,DIALPARAM_OF_EXTEN1028,{DIALOPTIONS})
exten = 1029,1,Macro(stdexten,1029,DIALPARAM_OF_EXTEN1029,{DIALOPTIONS})
exten = 1030,1,Macro(stdexten,1030,DIALPARAM_OF_EXTEN1030,{DIALOPTIONS})
exten = 1031,1,Macro(stdexten,1031,DIALPARAM_OF_EXTEN1031,{DIALOPTIONS})
exten = 1032,1,Macro(stdexten,1032,DIALPARAM_OF_EXTEN1032,{DIALOPTIONS})
exten = 1033,1,Macro(stdexten,1033,DIALPARAM_OF_EXTEN1033,{DIALOPTIONS})
exten = 1034,1,Macro(stdexten,1034,DIALPARAM_OF_EXTEN1034,{DIALOPTIONS})
exten = 1035,1,Macro(stdexten,1035,DIALPARAM_OF_EXTEN1035,{DIALOPTIONS})
exten = 1036,1,Macro(stdexten,1036,DIALPARAM_OF_EXTEN1036,{DIALOPTIONS})
exten = 1037,1,Macro(stdexten,1037,DIALPARAM_OF_EXTEN1037,{DIALOPTIONS})
exten = 1038,1,Macro(stdexten,1038,DIALPARAM_OF_EXTEN1038,{DIALOPTIONS})
exten = 1039,1,Macro(stdexten,1039,DIALPARAM_OF_EXTEN1039,{DIALOPTIONS})
exten = 1040,1,Macro(stdexten,1040,DIALPARAM_OF_EXTEN1040,{DIALOPTIONS})
exten = 1041,1,Macro(stdexten,1041,DIALPARAM_OF_EXTEN1041,{DIALOPTIONS})
exten = 1042,1,Macro(stdexten,1042,DIALPARAM_OF_EXTEN1042,{DIALOPTIONS})
exten = 1043,1,Macro(stdexten,1043,DIALPARAM_OF_EXTEN1043,{DIALOPTIONS})
exten = 1044,1,Macro(stdexten,1044,DIALPARAM_OF_EXTEN1044,{DIALOPTIONS})
exten = 1045,1,Macro(stdexten,1045,DIALPARAM_OF_EXTEN1045,{DIALOPTIONS})

[dial_physical_trunk_UMTS1]
exten = UMTS1,1,Set(CDR(userfield)=Outbound)
exten = UMTS1,2,Disa(no-password,physical_trunk_UMTS1_callrule)

[dial_physical_trunk_sipnet.ru]
exten = sipnet.ru,1,Set(CDR(userfield)=Outbound)
exten = sipnet.ru,2,Disa(no-password,voip_trunk_sipnet.ru_callrule)

[dial_physical_trunk_DUMMY_Trunk]
exten = DUMMY_Trunk,1,Set(CDR(userfield)=Outbound)
exten = DUMMY_Trunk,2,Disa(no-password,voip_trunk_DUMMY_Trunk_callrule)

[dial_physical_trunk_PBX_Branch]
exten = PBX_Branch,1,Set(CDR(userfield)=Outbound)
exten = PBX_Branch,2,Disa(no-password,voip_trunk_PBX_Branch_callrule)


[macro-playbusytone]
exten = s,1,Set(BusyTone=all-busy-now-try-call-later)
exten = s,2,Goto(${ARG1},1)
exten = BUSY,1,playback(${BusyTone})
exten = BUSY,2,Hangup()
exten = CHANUNAVAIL,1,playback(${BusyTone})
exten = CHANUNAVAIL,2,Hangup()
exten = CONGESTION,1,playback(${BusyTone})
exten = CONGESTION,2,Hangup()
exten = YSCHANUNAVAIL,1,playback(${BusyTone})
exten = YSCHANUNAVAIL,2,Hangup()

[physical_trunk_UMTS1_callrule]
exten = _.,1,Dial(YSGSM/g2/${EXTEN},30,${DIALOPTIONS})
exten = _.,2,Macro(playbusytone,${DIALSTATUS})
[voip_trunk_sipnet.ru_callrule]
exten = _.,1,Dial(PJSIP/${EXTEN}@trunk-sipnet.ru-endpoint,30,${DIALOPTIONS})
exten = _.,2,Macro(playbusytone,${DIALSTATUS})
[voip_trunk_DUMMY_Trunk_callrule]
exten = _.,1,Dial(PJSIP/${EXTEN}@trunk-DUMMY_Trunk-endpoint,30,${DIALOPTIONS})
exten = _.,2,Macro(playbusytone,${DIALSTATUS})
[voip_trunk_PBX_Branch_callrule]
exten = _.,1,Dial(PJSIP/${EXTEN}@trunk-PBX_Branch-endpoint,30,${DIALOPTIONS})
exten = _.,2,Macro(playbusytone,${DIALSTATUS})

[hintcontext]
include = park-hints

[park-hints]
exten => 6900,1,ParkedCall(6900)
exten => 6900,hint,park:6900@parkedcalls
exten => 6901,1,ParkedCall(6901)
exten => 6901,hint,park:6901@parkedcalls
exten => 6902,1,ParkedCall(6902)
exten => 6902,hint,park:6902@parkedcalls
exten => 6903,1,ParkedCall(6903)
exten => 6903,hint,park:6903@parkedcalls
exten => 6904,1,ParkedCall(6904)
exten => 6904,hint,park:6904@parkedcalls
exten => 6905,1,ParkedCall(6905)
exten => 6905,hint,park:6905@parkedcalls
exten => 6906,1,ParkedCall(6906)
exten => 6906,hint,park:6906@parkedcalls
exten => 6907,1,ParkedCall(6907)
exten => 6907,hint,park:6907@parkedcalls
exten => 6908,1,ParkedCall(6908)
exten => 6908,hint,park:6908@parkedcalls
exten => 6909,1,ParkedCall(6909)
exten => 6909,hint,park:6909@parkedcalls
exten => 6910,1,ParkedCall(6910)
exten => 6910,hint,park:6910@parkedcalls
exten => 6911,1,ParkedCall(6911)
exten => 6911,hint,park:6911@parkedcalls
exten => 6912,1,ParkedCall(6912)
exten => 6912,hint,park:6912@parkedcalls
exten => 6913,1,ParkedCall(6913)
exten => 6913,hint,park:6913@parkedcalls
exten => 6914,1,ParkedCall(6914)
exten => 6914,hint,park:6914@parkedcalls
exten => 6915,1,ParkedCall(6915)
exten => 6915,hint,park:6915@parkedcalls
exten => 6916,1,ParkedCall(6916)
exten => 6916,hint,park:6916@parkedcalls
exten => 6917,1,ParkedCall(6917)
exten => 6917,hint,park:6917@parkedcalls
exten => 6918,1,ParkedCall(6918)
exten => 6918,hint,park:6918@parkedcalls
exten => 6919,1,ParkedCall(6919)
exten => 6919,hint,park:6919@parkedcalls
exten => 6920,1,ParkedCall(6920)
exten => 6920,hint,park:6920@parkedcalls
exten => 6921,1,ParkedCall(6921)
exten => 6921,hint,park:6921@parkedcalls
exten => 6922,1,ParkedCall(6922)
exten => 6922,hint,park:6922@parkedcalls
exten => 6923,1,ParkedCall(6923)
exten => 6923,hint,park:6923@parkedcalls
exten => 6924,1,ParkedCall(6924)
exten => 6924,hint,park:6924@parkedcalls
exten => 6925,1,ParkedCall(6925)
exten => 6925,hint,park:6925@parkedcalls
exten => 6926,1,ParkedCall(6926)
exten => 6926,hint,park:6926@parkedcalls
exten => 6927,1,ParkedCall(6927)
exten => 6927,hint,park:6927@parkedcalls
exten => 6928,1,ParkedCall(6928)
exten => 6928,hint,park:6928@parkedcalls
exten => 6929,1,ParkedCall(6929)
exten => 6929,hint,park:6929@parkedcalls
exten => 6930,1,ParkedCall(6930)
exten => 6930,hint,park:6930@parkedcalls
exten => 6931,1,ParkedCall(6931)
exten => 6931,hint,park:6931@parkedcalls
exten => 6932,1,ParkedCall(6932)
exten => 6932,hint,park:6932@parkedcalls
exten => 6933,1,ParkedCall(6933)
exten => 6933,hint,park:6933@parkedcalls
exten => 6934,1,ParkedCall(6934)
exten => 6934,hint,park:6934@parkedcalls
exten => 6935,1,ParkedCall(6935)
exten => 6935,hint,park:6935@parkedcalls
exten => 6936,1,ParkedCall(6936)
exten => 6936,hint,park:6936@parkedcalls
exten => 6937,1,ParkedCall(6937)
exten => 6937,hint,park:6937@parkedcalls
exten => 6938,1,ParkedCall(6938)
exten => 6938,hint,park:6938@parkedcalls
exten => 6939,1,ParkedCall(6939)
exten => 6939,hint,park:6939@parkedcalls
exten => 6940,1,ParkedCall(6940)
exten => 6940,hint,park:6940@parkedcalls
exten => 6941,1,ParkedCall(6941)
exten => 6941,hint,park:6941@parkedcalls
exten => 6942,1,ParkedCall(6942)
exten => 6942,hint,park:6942@parkedcalls
exten => 6943,1,ParkedCall(6943)
exten => 6943,hint,park:6943@parkedcalls
exten => 6944,1,ParkedCall(6944)
exten => 6944,hint,park:6944@parkedcalls
exten => 6945,1,ParkedCall(6945)
exten => 6945,hint,park:6945@parkedcalls
exten => 6946,1,ParkedCall(6946)
exten => 6946,hint,park:6946@parkedcalls
exten => 6947,1,ParkedCall(6947)
exten => 6947,hint,park:6947@parkedcalls
exten => 6948,1,ParkedCall(6948)
exten => 6948,hint,park:6948@parkedcalls
exten => 6949,1,ParkedCall(6949)
exten => 6949,hint,park:6949@parkedcalls
exten => 6950,1,ParkedCall(6950)
exten => 6950,hint,park:6950@parkedcalls
exten => 6951,1,ParkedCall(6951)
exten => 6951,hint,park:6951@parkedcalls
exten => 6952,1,ParkedCall(6952)
exten => 6952,hint,park:6952@parkedcalls
exten => 6953,1,ParkedCall(6953)
exten => 6953,hint,park:6953@parkedcalls
exten => 6954,1,ParkedCall(6954)
exten => 6954,hint,park:6954@parkedcalls
exten => 6955,1,ParkedCall(6955)
exten => 6955,hint,park:6955@parkedcalls
exten => 6956,1,ParkedCall(6956)
exten => 6956,hint,park:6956@parkedcalls
exten => 6957,1,ParkedCall(6957)
exten => 6957,hint,park:6957@parkedcalls
exten => 6958,1,ParkedCall(6958)
exten => 6958,hint,park:6958@parkedcalls
exten => 6959,1,ParkedCall(6959)
exten => 6959,hint,park:6959@parkedcalls
exten => 6960,1,ParkedCall(6960)
exten => 6960,hint,park:6960@parkedcalls
exten => 6961,1,ParkedCall(6961)
exten => 6961,hint,park:6961@parkedcalls
exten => 6962,1,ParkedCall(6962)
exten => 6962,hint,park:6962@parkedcalls
exten => 6963,1,ParkedCall(6963)
exten => 6963,hint,park:6963@parkedcalls
exten => 6964,1,ParkedCall(6964)
exten => 6964,hint,park:6964@parkedcalls
exten => 6965,1,ParkedCall(6965)
exten => 6965,hint,park:6965@parkedcalls
exten => 6966,1,ParkedCall(6966)
exten => 6966,hint,park:6966@parkedcalls
exten => 6967,1,ParkedCall(6967)
exten => 6967,hint,park:6967@parkedcalls
exten => 6968,1,ParkedCall(6968)
exten => 6968,hint,park:6968@parkedcalls
exten => 6969,1,ParkedCall(6969)
exten => 6969,hint,park:6969@parkedcalls
exten => 6970,1,ParkedCall(6970)
exten => 6970,hint,park:6970@parkedcalls
exten => 6971,1,ParkedCall(6971)
exten => 6971,hint,park:6971@parkedcalls
exten => 6972,1,ParkedCall(6972)
exten => 6972,hint,park:6972@parkedcalls
exten => 6973,1,ParkedCall(6973)
exten => 6973,hint,park:6973@parkedcalls
exten => 6974,1,ParkedCall(6974)
exten => 6974,hint,park:6974@parkedcalls
exten => 6975,1,ParkedCall(6975)
exten => 6975,hint,park:6975@parkedcalls
exten => 6976,1,ParkedCall(6976)
exten => 6976,hint,park:6976@parkedcalls
exten => 6977,1,ParkedCall(6977)
exten => 6977,hint,park:6977@parkedcalls
exten => 6978,1,ParkedCall(6978)
exten => 6978,hint,park:6978@parkedcalls
exten => 6979,1,ParkedCall(6979)
exten => 6979,hint,park:6979@parkedcalls
exten => 6980,1,ParkedCall(6980)
exten => 6980,hint,park:6980@parkedcalls
exten => 6981,1,ParkedCall(6981)
exten => 6981,hint,park:6981@parkedcalls
exten => 6982,1,ParkedCall(6982)
exten => 6982,hint,park:6982@parkedcalls
exten => 6983,1,ParkedCall(6983)
exten => 6983,hint,park:6983@parkedcalls
exten => 6984,1,ParkedCall(6984)
exten => 6984,hint,park:6984@parkedcalls
exten => 6985,1,ParkedCall(6985)
exten => 6985,hint,park:6985@parkedcalls
exten => 6986,1,ParkedCall(6986)
exten => 6986,hint,park:6986@parkedcalls
exten => 6987,1,ParkedCall(6987)
exten => 6987,hint,park:6987@parkedcalls
exten => 6988,1,ParkedCall(6988)
exten => 6988,hint,park:6988@parkedcalls
exten => 6989,1,ParkedCall(6989)
exten => 6989,hint,park:6989@parkedcalls
exten => 6990,1,ParkedCall(6990)
exten => 6990,hint,park:6990@parkedcalls
exten => 6991,1,ParkedCall(6991)
exten => 6991,hint,park:6991@parkedcalls
exten => 6992,1,ParkedCall(6992)
exten => 6992,hint,park:6992@parkedcalls
exten => 6993,1,ParkedCall(6993)
exten => 6993,hint,park:6993@parkedcalls
exten => 6994,1,ParkedCall(6994)
exten => 6994,hint,park:6994@parkedcalls
exten => 6995,1,ParkedCall(6995)
exten => 6995,hint,park:6995@parkedcalls
exten => 6996,1,ParkedCall(6996)
exten => 6996,hint,park:6996@parkedcalls
exten => 6997,1,ParkedCall(6997)
exten => 6997,hint,park:6997@parkedcalls
exten => 6998,1,ParkedCall(6998)
exten => 6998,hint,park:6998@parkedcalls
exten => 6999,1,ParkedCall(6999)
exten => 6999,hint,park:6999@parkedcalls

[vmm]
exten = *02,1,VoiceMailMain()

[pickup_extension]
exten = _*04.,1,Set(CDR(pickuper)=${SRCEXTENSION})
exten = _*04.,2,Pickup(${EXTEN:3}@SRCEXTENSION)

[page_an_extension]
exten = _*5.,1,Macro(pagingintercom,PJSIP/${EXTEN:2},d)

[reset_followme]
exten = *70,1,Answer
 same = n,Set(DB(CFD/${SRCEXTENSION})=1)
 same = n,AGI(featurecode,${SRCEXTENSION},atransferto,voicemail)
 same = n,AGI(featurecode,${SRCEXTENSION},atransfernum,)
 same = n,AGI(featurecode,${SRCEXTENSION},btransferto,voicemail)
 same = n,AGI(featurecode,${SRCEXTENSION},btransfernum,)
 same = n,AGI(featurecode,${SRCEXTENSION},ntransferto,voicemail)
 same = n,AGI(featurecode,${SRCEXTENSION},ntransfernum,)
 same = n,Set(DB(CFB/${SRCEXTENSION})=1)
 same = n,Set(DB(CFBNUM/${SRCEXTENSION})=)
 same = n,AGI(featurecode,${SRCEXTENSION},busyforward,yes)
 same = n,Set(DB(CFN/${SRCEXTENSION})=1)
 same = n,Set(DB(CFNNUM/${SRCEXTENSION})=)
 same = n,AGI(featurecode,${SRCEXTENSION},noanswerforward,yes)
 same = n,Set(DB(CFA/${SRCEXTENSION})=0)
 same = n,Set(DB(CFANUM/${SRCEXTENSION})=)
 same = n,AGI(featurecode,${SRCEXTENSION},alwaysforward,no)
 same = n,Set(DB(DND/${SRCEXTENSION})=0)
 same = n,AGI(featurecode,${SRCEXTENSION},dnd,no)
 same = n,Wait(1)
 same = n,Playback(beep)
 same = n,Wait(1)
 same = n,Hangup()

[enable_followme_always]
exten = *71,1,Answer
 same = n,Set(DB(CFA/${SRCEXTENSION})=1)
 same = n,Set(DB(ACFD/${SRCEXTENSION})=1)
 same = n,AGI(featurecode,${SRCEXTENSION},atransferto,voicemail)
 same = n,AGI(featurecode,${SRCEXTENSION},alwaysforward,yes)
 same = n,Wait(1)
 same = n,Playback(beep)
 same = n,Hangup()
exten = _*71.,1,Answer
 same = n,Set(DB(CFA/${SRCEXTENSION})=1)
 same = n,Set(DB(ACFD/${SRCEXTENSION})=0)
 same = n,Set(DB(CFANUM/${SRCEXTENSION})=${EXTEN:3})
 same = n,AGI(featurecode,${SRCEXTENSION},alwaysforward,yes)
 same = n,AGI(featurecode,${SRCEXTENSION},atransferto,customnumber)
 same = n,AGI(featurecode,${SRCEXTENSION},atransfernum,${EXTEN:3})
 same = n,Wait(1)
 same = n,Playback(beep)
 same = n,Hangup()

[disable_followme_always]
exten = *071,1,Answer
 same = n,Set(DB(CFA/${SRCEXTENSION})=0)
 same = n,AGI(featurecode,${SRCEXTENSION},alwaysforward,no)
 same = n,Wait(1)
 same = n,Playback(beep)
 same = n,Hangup()

[enable_followme_noanswer]
exten = *73,1,Answer
 same = n,Set(DB(CFN/${SRCEXTENSION})=1)
 same = n,Set(DB(NCFD/${SRCEXTENSION})=1)
 same = n,AGI(featurecode,${SRCEXTENSION},ntransferto,voicemail)
 same = n,AGI(featurecode,${SRCEXTENSION},noanswerforward,yes)
 same = n,Wait(1)
 same = n,Playback(beep)
 same = n,Hangup()
exten = _*73.,1,Answer
 same = n,Set(DB(CFN/${SRCEXTENSION})=1)
 same = n,Set(DB(NCFD/${SRCEXTENSION})=0)
 same = n,Set(DB(CFNNUM/${SRCEXTENSION})=${EXTEN:3})
 same = n,AGI(featurecode,${SRCEXTENSION},noanswerforward,yes)
 same = n,AGI(featurecode,${SRCEXTENSION},ntransferto,customnumber)
 same = n,AGI(featurecode,${SRCEXTENSION},ntransfernum,${EXTEN:3})
 same = n,Wait(1)
 same = n,Playback(beep)
 same = n,Hangup()

[disable_followme_noanswer]
exten = *073,1,Answer
 same = n,Set(DB(CFN/${SRCEXTENSION})=0)
 same = n,AGI(featurecode,${SRCEXTENSION},noanswerforward,no)
 same = n,Wait(1)
 same = n,Playback(beep)
 same = n,Hangup()

[enable_followme_busy]
exten = *72,1,Answer
 same = n,Set(DB(CFB/${SRCEXTENSION})=1)
 same = n,Set(DB(BCFD/${SRCEXTENSION})=1)
 same = n,AGI(featurecode,${SRCEXTENSION},btransferto,voicemail)
 same = n,AGI(featurecode,${SRCEXTENSION},busyforward,yes)
 same = n,Wait(1)
 same = n,Playback(beep)
 same = n,Hangup()
exten = _*72.,1,Answer
 same = n,Set(DB(CFB/${SRCEXTENSION})=1)
 same = n,Set(DB(BCFD/${SRCEXTENSION})=0)
 same = n,Set(DB(CFBNUM/${SRCEXTENSION})=${EXTEN:3})
 same = n,AGI(featurecode,${SRCEXTENSION},busyforward,yes)
 same = n,AGI(featurecode,${SRCEXTENSION},btransferto,customnumber)
 same = n,AGI(featurecode,${SRCEXTENSION},btransfernum,${EXTEN:3})
 same = n,Wait(1)
 same = n,Playback(beep)
 same = n,Hangup()
[disable_followme_busy]
exten = *072,1,Answer
 same = n,Set(DB(CFB/${SRCEXTENSION})=0)
 same = n,AGI(featurecode,${SRCEXTENSION},busyforward,no)
 same = n,Wait(1)
 same = n,Playback(beep)
 same = n,Hangup()

[enable_dnd]
exten = *74,1,Answer
 same = n,Set(DB(DND/${SRCEXTENSION})=1)
 same = n,AGI(featurecode,${SRCEXTENSION},dnd,yes)
 same = n,Wait(1)
 same = n,Playback(beep)
 same = n,Hangup()

[disable_dnd]
exten = *074,1,Answer
 same = n,Set(DB(DND/${SRCEXTENSION})=0)
 same = n,AGI(featurecode,${SRCEXTENSION},dnd,no)
 same = n,Wait(1)
 same = n,Playback(beep)
 same = n,Hangup()

[chan-spy-normal]
exten = _*90X.,1,Noop(going to spy)
 same = n,Gotoif(${DB_EXISTS(allowspy/${EXTEN:3})}?:chanspy-invalid,s,1)
 same = n,Gotoif(${LEN(${DIALPARAM_OF_EXTEN${EXTEN:3}})}?:chanspy-invalid,s,1)
 same = n,Answer
 same = n,Wait(1)
 same = n,ChanSpy(${DIALPARAM_OF_EXTEN${EXTEN:3}},q)
 same = n,Hangup

[chan-spy-whisper]
exten = _*91X.,1,Noop(going to spy)
 same = n,Gotoif(${DB_EXISTS(allowspy/${EXTEN:3})}?:chanspy-invalid,s,1)
 same = n,Gotoif(${LEN(${DIALPARAM_OF_EXTEN${EXTEN:3}})}?:chanspy-invalid,s,1)
 same = n,Answer
 same = n,Wait(1)
 same = n,ChanSpy(${DIALPARAM_OF_EXTEN${EXTEN:3}},wq)
 same = n,Hangup

[chan-spy-barge]
exten = _*92X.,1,Noop(going to spy)
 same = n,Gotoif(${DB_EXISTS(allowspy/${EXTEN:3})}?:chanspy-invalid,s,1)
 same = n,Gotoif(${LEN(${DIALPARAM_OF_EXTEN${EXTEN:3}})}?:chanspy-invalid,s,1)
 same = n,Answer
 same = n,Wait(1)
 same = n,ChanSpy(${DIALPARAM_OF_EXTEN${EXTEN:3}},Bq)
 same = n,Hangup

[voicemails]
exten = 1000,1,VoiceMail(1000@default,u)
exten = 1000,n,Hangup()
exten = 1001,1,VoiceMail(1001@default,u)
exten = 1001,n,Hangup()
exten = 1002,1,VoiceMail(1002@default,u)
exten = 1002,n,Hangup()
exten = 1003,1,VoiceMail(1003@default,u)
exten = 1003,n,Hangup()
exten = 1004,1,VoiceMail(1004@default,u)
exten = 1004,n,Hangup()
exten = 1005,1,VoiceMail(1005@default,u)
exten = 1005,n,Hangup()
exten = 1006,1,VoiceMail(1006@default,u)
exten = 1006,n,Hangup()
exten = 1007,1,VoiceMail(1007@default,u)
exten = 1007,n,Hangup()
exten = 1008,1,VoiceMail(1008@default,u)
exten = 1008,n,Hangup()
exten = 1009,1,VoiceMail(1009@default,u)
exten = 1009,n,Hangup()
exten = 1010,1,VoiceMail(1010@default,u)
exten = 1010,n,Hangup()
exten = 1011,1,VoiceMail(1011@default,u)
exten = 1011,n,Hangup()
exten = 1012,1,VoiceMail(1012@default,u)
exten = 1012,n,Hangup()
exten = 1013,1,VoiceMail(1013@default,u)
exten = 1013,n,Hangup()
exten = 1014,1,VoiceMail(1014@default,u)
exten = 1014,n,Hangup()
exten = 1015,1,VoiceMail(1015@default,u)
exten = 1015,n,Hangup()
exten = 1016,1,VoiceMail(1016@default,u)
exten = 1016,n,Hangup()
exten = 1017,1,VoiceMail(1017@default,u)
exten = 1017,n,Hangup()
exten = 1018,1,VoiceMail(1018@default,u)
exten = 1018,n,Hangup()
exten = 1019,1,VoiceMail(1019@default,u)
exten = 1019,n,Hangup()
exten = 1020,1,VoiceMail(1020@default,u)
exten = 1020,n,Hangup()
exten = 1021,1,VoiceMail(1021@default,u)
exten = 1021,n,Hangup()
exten = 1022,1,VoiceMail(1022@default,u)
exten = 1022,n,Hangup()
exten = 1023,1,VoiceMail(1023@default,u)
exten = 1023,n,Hangup()
exten = 1024,1,VoiceMail(1024@default,u)
exten = 1024,n,Hangup()
exten = 1025,1,VoiceMail(1025@default,u)
exten = 1025,n,Hangup()
exten = 1026,1,VoiceMail(1026@default,u)
exten = 1026,n,Hangup()
exten = 1027,1,VoiceMail(1027@default,u)
exten = 1027,n,Hangup()
exten = 1028,1,VoiceMail(1028@default,u)
exten = 1028,n,Hangup()
exten = 1029,1,VoiceMail(1029@default,u)
exten = 1029,n,Hangup()
exten = 1030,1,VoiceMail(1030@default,u)
exten = 1030,n,Hangup()
exten = 1031,1,VoiceMail(1031@default,u)
exten = 1031,n,Hangup()
exten = 1032,1,VoiceMail(1032@default,u)
exten = 1032,n,Hangup()
exten = 1033,1,VoiceMail(1033@default,u)
exten = 1033,n,Hangup()
exten = 1034,1,VoiceMail(1034@default,u)
exten = 1034,n,Hangup()
exten = 1035,1,VoiceMail(1035@default,u)
exten = 1035,n,Hangup()
exten = 1036,1,VoiceMail(1036@default,u)
exten = 1036,n,Hangup()
exten = 1037,1,VoiceMail(1037@default,u)
exten = 1037,n,Hangup()
exten = 1038,1,VoiceMail(1038@default,u)
exten = 1038,n,Hangup()
exten = 1039,1,VoiceMail(1039@default,u)
exten = 1039,n,Hangup()
exten = 1040,1,VoiceMail(1040@default,u)
exten = 1040,n,Hangup()
exten = 1041,1,VoiceMail(1041@default,u)
exten = 1041,n,Hangup()
exten = 1042,1,VoiceMail(1042@default,u)
exten = 1042,n,Hangup()
exten = 1043,1,VoiceMail(1043@default,u)
exten = 1043,n,Hangup()
exten = 1044,1,VoiceMail(1044@default,u)
exten = 1044,n,Hangup()
exten = 1045,1,VoiceMail(1045@default,u)
exten = 1045,n,Hangup()

[from-outside]
exten = 1000,1,Macro(stdexten-fromoutside,1000,${DIALPARAM_OF_EXTEN1000})
exten = 1001,1,Macro(stdexten-fromoutside,1001,${DIALPARAM_OF_EXTEN1001})
exten = 1002,1,Macro(stdexten-fromoutside,1002,${DIALPARAM_OF_EXTEN1002})
exten = 1003,1,Macro(stdexten-fromoutside,1003,${DIALPARAM_OF_EXTEN1003})
exten = 1004,1,Macro(stdexten-fromoutside,1004,${DIALPARAM_OF_EXTEN1004})
exten = 1005,1,Macro(stdexten-fromoutside,1005,${DIALPARAM_OF_EXTEN1005})
exten = 1006,1,Macro(stdexten-fromoutside,1006,${DIALPARAM_OF_EXTEN1006})
exten = 1007,1,Macro(stdexten-fromoutside,1007,${DIALPARAM_OF_EXTEN1007})
exten = 1008,1,Macro(stdexten-fromoutside,1008,${DIALPARAM_OF_EXTEN1008})
exten = 1009,1,Macro(stdexten-fromoutside,1009,${DIALPARAM_OF_EXTEN1009})
exten = 1010,1,Macro(stdexten-fromoutside,1010,${DIALPARAM_OF_EXTEN1010})
exten = 1011,1,Macro(stdexten-fromoutside,1011,${DIALPARAM_OF_EXTEN1011})
exten = 1012,1,Macro(stdexten-fromoutside,1012,${DIALPARAM_OF_EXTEN1012})
exten = 1013,1,Macro(stdexten-fromoutside,1013,${DIALPARAM_OF_EXTEN1013})
exten = 1014,1,Macro(stdexten-fromoutside,1014,${DIALPARAM_OF_EXTEN1014})
exten = 1015,1,Macro(stdexten-fromoutside,1015,${DIALPARAM_OF_EXTEN1015})
exten = 1016,1,Macro(stdexten-fromoutside,1016,${DIALPARAM_OF_EXTEN1016})
exten = 1017,1,Macro(stdexten-fromoutside,1017,${DIALPARAM_OF_EXTEN1017})
exten = 1018,1,Macro(stdexten-fromoutside,1018,${DIALPARAM_OF_EXTEN1018})
exten = 1019,1,Macro(stdexten-fromoutside,1019,${DIALPARAM_OF_EXTEN1019})
exten = 1020,1,Macro(stdexten-fromoutside,1020,${DIALPARAM_OF_EXTEN1020})
exten = 1021,1,Macro(stdexten-fromoutside,1021,${DIALPARAM_OF_EXTEN1021})
exten = 1022,1,Macro(stdexten-fromoutside,1022,${DIALPARAM_OF_EXTEN1022})
exten = 1023,1,Macro(stdexten-fromoutside,1023,${DIALPARAM_OF_EXTEN1023})
exten = 1024,1,Macro(stdexten-fromoutside,1024,${DIALPARAM_OF_EXTEN1024})
exten = 1025,1,Macro(stdexten-fromoutside,1025,${DIALPARAM_OF_EXTEN1025})
exten = 1026,1,Macro(stdexten-fromoutside,1026,${DIALPARAM_OF_EXTEN1026})
exten = 1027,1,Macro(stdexten-fromoutside,1027,${DIALPARAM_OF_EXTEN1027})
exten = 1028,1,Macro(stdexten-fromoutside,1028,${DIALPARAM_OF_EXTEN1028})
exten = 1029,1,Macro(stdexten-fromoutside,1029,${DIALPARAM_OF_EXTEN1029})
exten = 1030,1,Macro(stdexten-fromoutside,1030,${DIALPARAM_OF_EXTEN1030})
exten = 1031,1,Macro(stdexten-fromoutside,1031,${DIALPARAM_OF_EXTEN1031})
exten = 1032,1,Macro(stdexten-fromoutside,1032,${DIALPARAM_OF_EXTEN1032})
exten = 1033,1,Macro(stdexten-fromoutside,1033,${DIALPARAM_OF_EXTEN1033})
exten = 1034,1,Macro(stdexten-fromoutside,1034,${DIALPARAM_OF_EXTEN1034})
exten = 1035,1,Macro(stdexten-fromoutside,1035,${DIALPARAM_OF_EXTEN1035})
exten = 1036,1,Macro(stdexten-fromoutside,1036,${DIALPARAM_OF_EXTEN1036})
exten = 1037,1,Macro(stdexten-fromoutside,1037,${DIALPARAM_OF_EXTEN1037})
exten = 1038,1,Macro(stdexten-fromoutside,1038,${DIALPARAM_OF_EXTEN1038})
exten = 1039,1,Macro(stdexten-fromoutside,1039,${DIALPARAM_OF_EXTEN1039})
exten = 1040,1,Macro(stdexten-fromoutside,1040,${DIALPARAM_OF_EXTEN1040})
exten = 1041,1,Macro(stdexten-fromoutside,1041,${DIALPARAM_OF_EXTEN1041})
exten = 1042,1,Macro(stdexten-fromoutside,1042,${DIALPARAM_OF_EXTEN1042})
exten = 1043,1,Macro(stdexten-fromoutside,1043,${DIALPARAM_OF_EXTEN1043})
exten = 1044,1,Macro(stdexten-fromoutside,1044,${DIALPARAM_OF_EXTEN1044})
exten = 1045,1,Macro(stdexten-fromoutside,1045,${DIALPARAM_OF_EXTEN1045})
exten = fax,1,Goto(inrouter_${INROUTERNAME}_fax_detect,fax,1)

[only-dialextension-q6700]
exten = _.,1,Gotoif(${DB(DND/${EXTEN})}>0?h,1)
exten = _.,2,Set(ODETIME=30)
exten = _.,3,Goto(only-dialextension,${EXTEN},1)
exten = h,1,Hangup()

[only-dialextension]
exten = 1000,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1000,2,Dial(${DIALPARAM_OF_EXTEN1000},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1000})
exten = 1001,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1001,2,Dial(${DIALPARAM_OF_EXTEN1001},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1001})
exten = 1002,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1002,2,Dial(${DIALPARAM_OF_EXTEN1002},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1002})
exten = 1003,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1003,2,Dial(${DIALPARAM_OF_EXTEN1003},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1003})
exten = 1004,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1004,2,Dial(${DIALPARAM_OF_EXTEN1004},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1004})
exten = 1005,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1005,2,Dial(${DIALPARAM_OF_EXTEN1005},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1005})
exten = 1006,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1006,2,Dial(${DIALPARAM_OF_EXTEN1006},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1006})
exten = 1007,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1007,2,Dial(${DIALPARAM_OF_EXTEN1007},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1007})
exten = 1008,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1008,2,Dial(${DIALPARAM_OF_EXTEN1008},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1008})
exten = 1009,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1009,2,Dial(${DIALPARAM_OF_EXTEN1009},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1009})
exten = 1010,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1010,2,Dial(${DIALPARAM_OF_EXTEN1010},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1010})
exten = 1011,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1011,2,Dial(${DIALPARAM_OF_EXTEN1011},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1011})
exten = 1012,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1012,2,Dial(${DIALPARAM_OF_EXTEN1012},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1012})
exten = 1013,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1013,2,Dial(${DIALPARAM_OF_EXTEN1013},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1013})
exten = 1014,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1014,2,Dial(${DIALPARAM_OF_EXTEN1014},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1014})
exten = 1015,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1015,2,Dial(${DIALPARAM_OF_EXTEN1015},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1015})
exten = 1016,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1016,2,Dial(${DIALPARAM_OF_EXTEN1016},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1016})
exten = 1017,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1017,2,Dial(${DIALPARAM_OF_EXTEN1017},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1017})
exten = 1018,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1018,2,Dial(${DIALPARAM_OF_EXTEN1018},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1018})
exten = 1019,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1019,2,Dial(${DIALPARAM_OF_EXTEN1019},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1019})
exten = 1020,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1020,2,Dial(${DIALPARAM_OF_EXTEN1020},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1020})
exten = 1021,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1021,2,Dial(${DIALPARAM_OF_EXTEN1021},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1021})
exten = 1022,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1022,2,Dial(${DIALPARAM_OF_EXTEN1022},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1022})
exten = 1023,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1023,2,Dial(${DIALPARAM_OF_EXTEN1023},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1023})
exten = 1024,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1024,2,Dial(${DIALPARAM_OF_EXTEN1024},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1024})
exten = 1025,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1025,2,Dial(${DIALPARAM_OF_EXTEN1025},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1025})
exten = 1026,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1026,2,Dial(${DIALPARAM_OF_EXTEN1026},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1026})
exten = 1027,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1027,2,Dial(${DIALPARAM_OF_EXTEN1027},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1027})
exten = 1028,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1028,2,Dial(${DIALPARAM_OF_EXTEN1028},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1028})
exten = 1029,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1029,2,Dial(${DIALPARAM_OF_EXTEN1029},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1029})
exten = 1030,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1030,2,Dial(${DIALPARAM_OF_EXTEN1030},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1030})
exten = 1031,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1031,2,Dial(${DIALPARAM_OF_EXTEN1031},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1031})
exten = 1032,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1032,2,Dial(${DIALPARAM_OF_EXTEN1032},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1032})
exten = 1033,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1033,2,Dial(${DIALPARAM_OF_EXTEN1033},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1033})
exten = 1034,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1034,2,Dial(${DIALPARAM_OF_EXTEN1034},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1034})
exten = 1035,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1035,2,Dial(${DIALPARAM_OF_EXTEN1035},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1035})
exten = 1036,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1036,2,Dial(${DIALPARAM_OF_EXTEN1036},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1036})
exten = 1037,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1037,2,Dial(${DIALPARAM_OF_EXTEN1037},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1037})
exten = 1038,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1038,2,Dial(${DIALPARAM_OF_EXTEN1038},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1038})
exten = 1039,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1039,2,Dial(${DIALPARAM_OF_EXTEN1039},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1039})
exten = 1040,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1040,2,Dial(${DIALPARAM_OF_EXTEN1040},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1040})
exten = 1041,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1041,2,Dial(${DIALPARAM_OF_EXTEN1041},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1041})
exten = 1042,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1042,2,Dial(${DIALPARAM_OF_EXTEN1042},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1042})
exten = 1043,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1043,2,Dial(${DIALPARAM_OF_EXTEN1043},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1043})
exten = 1044,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1044,2,Dial(${DIALPARAM_OF_EXTEN1044},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1044})
exten = 1045,1,set(IGNORE_PRIOR_STRATEGY=1)
exten = 1045,2,Dial(${DIALPARAM_OF_EXTEN1045},${ODETIME},${DIALOPTIONS}${RINGTONE},,${RINGINGPRIORITY_1045})

[ivrs]
exten = 6500,1,Set(YSGROUPEXTEN=6500)
exten = 6500,n,Set(CDR(orgdst)=6500)
exten = 6500,n,Goto(ivr_6500,6500,1)

[ivr_6500]
exten = 6500,1,NoOp(6500)
exten = 6500,n,Set(TIMEOUT(digit)=3)
exten = 6500,n,Background(record/default)
exten = 6500,n,WaitExten(3)
exten = 6500,n,Background(record/default)
exten = 6500,n,WaitExten(3)
exten = 6500,n,Background(record/default)
exten = 6500,n,WaitExten(3)
exten = 6500,n,Goto(t,1)
exten = unknown,1,NoOp(No Action)
exten = fax,1,Goto(inrouter_${INROUTERNAME}_fax_detect,fax,1)
include = from-outside
include = conferences
include = queues
include = ivrs
include = ringgroups
include = pagegroups
include = speeddial

[ringgroups]
exten = 6200,1,Goto(ringgroup_6200,6200,1)
[ringgroup_6200]
exten = 6200,1,NoOp(6200)
exten = 6200,n,Set(YSGROUPEXTEN=6200)
exten = 6200,n,Set(CDR(orgdst)=6200)
exten = 6200,n,Set(_RINGGROUPS=yes)
exten = 6200,n,Wait(1)
exten = 6200,n,Dial(${DIALPARAM_OF_EXTEN1000}&${DIALPARAM_OF_EXTEN1001}&${DIALPARAM_OF_EXTEN1002}&${DIALPARAM_OF_EXTEN1003}&${DIALPARAM_OF_EXTEN1004},60,TtKkXx${RINGTONE})
exten = 6200,n,Goto(always-Hangup,h,1)
exten = fax,1,Goto(inrouter_${INROUTERNAME}_fax_detect,fax,1)
exten = _.,1,Goto(from-outside,${EXTEN},1)

[macro-queue-login]
exten = s,1,Wait(1)
exten = s,n,Gotoif(${ARG2}?3:4)
exten = s,n,Authenticate(${ARG2})
exten = s,n,AddQueueMember(${ARG1},${ARG3},,,,)
exten = s,n,ExecIf($[${AQMSTATUS}=FULLMEMBER]?Playback(queue-full):Playback(agent-loginok))
exten = s,n,Playback(vm-goodbye)
exten = s,n,Hangup()

[macro-queue-logout]
exten = s,1,Wait(1)
exten = s,n,RemoveQueueMember(${ARG1},${ARG2})
exten = s,n,Playback(agent-loggedoff)
exten = s,n,Playback(vm-goodbye)
exten = s,n,Hangup()

[queues]
exten = 6700,1,Set(YSGROUPEXTEN=6700)
exten = 6700,n,Set(CDR(orgdst)=6700)
exten = 6700,n,Goto(queue_6700,6700,1)
exten = 6700*,1,Macro(queue-login,queue-6700,,${YSINTERFACE})
exten = 6700**,1,Macro(queue-logout,queue-6700,${YSINTERFACE})
[queue_6700]
exten = 6700,1,NoOp(6700)
exten = 6700,2,answer()
exten = 6700,n,Queue(queue-6700,tTkKxXr,,,1800)
exten = 6700,n,Goto(always-Hangup,h,1)
exten = none,1,Goto(always-Hangup,h,1)
exten = fax,1,Goto(inrouter_${INROUTERNAME}_fax_detect,fax,1)
;exten = _.,1,Goto(from-outside,${EXTEN},1)

[conferences]
exten = 6400,1,Goto(conference_6400,6400,1)

[conferences_invite]
exten = 6400,1,Set(YSGROUPEXTEN=6400)
exten = 6400,2,Set(CONF_NUM=6400)
exten = 6400,3,Goto(conference,1)
exten = conference,1,Set(CDR(orgdst)=${CONF_NUM})
exten = conference,2,Set(CDR(conferinvitee)=${CONFER_INVITEE})
exten = conference,3,Gotoif($[${IS_ADMIN}=1]?7:7)
exten = conference,4,Playback(vm-extension)
exten = conference,5,SayDigits(${CONFER_INVITER})
exten = conference,6,Goto(8)
exten = conference,7,Playback(admin)
exten = conference,8,Playback(invited_to)
exten = conference,9,SayDigits(${CONFERENCENO})
exten = conference,10,Set(INVITE_CONFERENCE=1)
exten = conference,11,Set(CONFER_INVITER=${CONFER_INVITER})
exten = conference,12,Set(CALLERID(num)=${CONFER_INVITEE})
exten = conference,13,Set(CALLERID(name)=${CONFER_INVITEENAME})
exten = conference,14,Goto(conference_${CONF_NUM},${CONF_NUM},1)

[conference_6400]
exten = 6400,1,MeetMe(6400,MsnY)
exten = 6400,2,Hangup()
exten = fax,1,Goto(inrouter_${INROUTERNAME}_fax_detect,fax,1)

[pagegroups]
exten = 6300,1,Set(CDR(orgdst)=6300)
exten = 6300,2,Macro(pagingintercom,${PJSIP_DIAL_CONTACTS(1000)}&${PJSIP_DIAL_CONTACTS(1001)}&${PJSIP_DIAL_CONTACTS(1002)},)

[speeddial]

[disas]

[callbacks]

[fax_to_email]
exten = _X.,1,Answer()
exten = _X.,n,Wait(1)
exten = _X.,n,Set(SENDEMAIL=0)
exten = _X.,n,Set(FAXOPT(gateway)=no)
exten = _X.,n,Set(FAXOWNER=${EXTEN})
exten = _X.,n,Set(FAXFROM=${IF($[${LEN(${CALLERID(num)})}>0]?${CALLERID(num)}:Unknown)})
exten = _X.,n,Set(FAXFILE=/ysdisk/fax/${FAXOWNER}-${STRFTIME(,,%Y%m%d-%H%M)}-${RAND(1)}.tiff)
exten = _X.,n,ReceiveFAX(${FAXFILE},f)
exten = _X.,n,Set(SENDEMAIL=1)
exten = _X.,n,System(/ysdisk/ysapps/pbxcenter/bin/ccsmtp yeastar@yandex.ru ${EMAILADDR_${FAXOWNER}} ${FAXFROM} ${FAXFILE})
exten = _X.,n,Hangup
exten = custom,1,Answer()
exten = custom,n,Wait(3)
exten = custom,n,Set(FAXFROM=${IF($[${LEN(${CALLERID(num)})}>0]?${CALLERID(num)}:Unknown)})
exten = custom,n,Set(FAXFILE=/ysdisk/fax/custom-${STRFTIME(,,%Y%m%d-%H%M)}-${RAND(1)}.tiff)
exten = custom,n,ReceiveFAX(${FAXFILE},f)
exten = custom,n,System(/bin/ccsmtp yeastar@yandex.ru ${EMAILADDR_CUSTOM} ${FAXFROM} ${FAXFILE})
exten = custom,n,Hangup
exten = h,1,GotoIf($[${SENDEMAIL}=1]?3:2)
exten = h,2,System(/ysdisk/ysapps/pbxcenter/bin/ccsmtp yeastar@yandex.ru ${EMAILADDR_${FAXOWNER}} ${FAXFROM} ${FAXFILE})
exten = h,3,Hangup()

[receive_fax]
exten = 1045,1,NoOp(receive_fax)
exten = 1045,n,Dial(DAHDI/8,${RINGTIME_1045})

[all_outrouters]
include = outrouter_toU520wan
include = outrouter_test
include = outrouter_testsip
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[outrouter_toU520wan]
exten = _7XXXX.,1,YsWalkContext(blacklist-outbound,${EXTEN:1},1,${CALLERID(num)},outbound)
 same = n,NoOp(No Pinset)
 same = n,Set(ORGINEXTEN=${EXTEN})
 same = n,Set(ORGINROUTE=toU520wan)
 same = n,Set(ORGINCONTEXT=${IF($[${LEN(${ORGINCONTEXT})}>0]?${ORGINCONTEXT}:${CONTEXT})})
 same = n,Set(MRMEMORYHUNT=no)
 same = n,GetNextOutRouter(toU520wan,${EXTEN})
 same = n,Goto(a1)
 same = n,Gotoif($[${LEN(${NEXTROUTER})} > 0]?${NEXTROUTER},${ORGINEXTEN},1)
 same = n(o1),Hangup()
 same = n(a1),NoOp(NO ADJUST)
 same = n,Macro(trunkdial-failover-0.3,0,,${EXTEN:1},)
exten = h,1,Hangup
[outrouter_test]
exten = _8x.,1,YsWalkContext(blacklist-outbound,${EXTEN:},1,${CALLERID(num)},outbound)
 same = n,NoOp(No Pinset)
 same = n,Set(ORGINEXTEN=${EXTEN})
 same = n,Set(ORGINROUTE=test)
 same = n,Set(ORGINCONTEXT=${IF($[${LEN(${ORGINCONTEXT})}>0]?${ORGINCONTEXT}:${CONTEXT})})
 same = n,Set(MRMEMORYHUNT=no)
 same = n,GetNextOutRouter(test,${EXTEN})
 same = n,Goto(a1)
 same = n,Gotoif($[${LEN(${NEXTROUTER})} > 0]?${NEXTROUTER},${ORGINEXTEN},1)
 same = n(o1),Hangup()
 same = n(a1),NoOp(NO ADJUST)
 same = n,Macro(trunkdial-failover-0.3,1,,${EXTEN:},trunk_UMTS1)
exten = h,1,Hangup
[outrouter_testsip]
exten = _9X.,1,YsWalkContext(blacklist-outbound,${EXTEN:1},1,${CALLERID(num)},outbound)
 same = n,NoOp(No Pinset)
 same = n,Set(ORGINEXTEN=${EXTEN})
 same = n,Set(ORGINROUTE=testsip)
 same = n,Set(ORGINCONTEXT=${IF($[${LEN(${ORGINCONTEXT})}>0]?${ORGINCONTEXT}:${CONTEXT})})
 same = n,Set(MRMEMORYHUNT=no)
 same = n,GetNextOutRouter(testsip,${EXTEN})
 same = n,Goto(a1)
 same = n,Gotoif($[${LEN(${NEXTROUTER})} > 0]?${NEXTROUTER},${ORGINEXTEN},1)
 same = n(o1),Hangup()
 same = n(a1),NoOp(NO ADJUST)
 same = n,Macro(trunkdial-failover-0.3,0,,${EXTEN:1},)
exten = h,1,Hangup
[outrouter_to_PBX_Branch]
exten = _2XX!,1,YsWalkContext(blacklist-outbound,${EXTEN:},1,${CALLERID(num)},outbound)
 same = n,NoOp(No Pinset)
 same = n,Set(ORGINEXTEN=${EXTEN})
 same = n,Set(ORGINROUTE=to_PBX_Branch)
 same = n,Set(ORGINCONTEXT=${IF($[${LEN(${ORGINCONTEXT})}>0]?${ORGINCONTEXT}:${CONTEXT})})
 same = n,Set(MRMEMORYHUNT=no)
 same = n,GetNextOutRouter(to_PBX_Branch,${EXTEN})
 same = n,Goto(a1)
 same = n,Gotoif($[${LEN(${NEXTROUTER})} > 0]?${NEXTROUTER},${ORGINEXTEN},1)
 same = n(o1),Hangup()
 same = n(a1),NoOp(NO ADJUST)
 same = n,Macro(trunkdial-failover-0.3,1,,${EXTEN:},trunk-PBX_Branch-endpoint)
exten = h,1,Hangup
[outrouter_To_1049_Trunk]
exten = _9.,1,YsWalkContext(blacklist-outbound,${EXTEN:},1,${CALLERID(num)},outbound)
 same = n,NoOp(No Pinset)
 same = n,Set(ORGINEXTEN=${EXTEN})
 same = n,Set(ORGINROUTE=To_1049_Trunk)
 same = n,Set(ORGINCONTEXT=${IF($[${LEN(${ORGINCONTEXT})}>0]?${ORGINCONTEXT}:${CONTEXT})})
 same = n,Set(MRMEMORYHUNT=no)
 same = n,GetNextOutRouter(To_1049_Trunk,${EXTEN})
 same = n,Goto(a1)
 same = n,Gotoif($[${LEN(${NEXTROUTER})} > 0]?${NEXTROUTER},${ORGINEXTEN},1)
 same = n(o1),Hangup()
 same = n(a1),NoOp(NO ADJUST)
 same = n,Macro(trunkdial-failover-0.3,1,,${EXTEN:},trunk-DUMMY_Trunk-endpoint)
exten = h,1,Hangup

[inrouter_feature_dest]
include = inrouter_Routein_feature_dest
include = inrouter_fromU520wan_feature_dest
include = inrouter_from_PBX_Branch_feature_dest
include = inrouter_from_SIPNET_feature_dest
include = inrouter_From_1049_Trunk_feature_dest

[macro-inrouter_Routein]
exten = s,1,Set(CDR(userfield)=Inbound)
exten = s,n,Set(CALLERID(num)=${IF(${LEN(${CALLERID(num)})>0}?${CALLERID(num)}:Unknown)})
exten = s,n,Set(INROUTERNAME=Routein)
exten = s,n,Set(YSDETECTFAX=no)
exten = s,n,Set(YSARG=${ARG2})
exten = s,n,YsWalkContext(mobile-exten-callingrule,${CALLERID(num)},1,${CALLERID(num)},mobile)
exten = s,n,Gotoif(${YSEXISTCONTEXT}>0?mobile-exten-callingrule,${CALLERID(num)},1)
exten = s,n,AGI(/ysdisk/ysapps/pbxcenter/bin/autoclip,get,${CALLERID(num)},${SRCTRUNKNAME})
exten = s,n,Gotoif($[${LEN(${CLIPEXTENSION})}>1]?from-outside,${CLIPEXTENSION},1)
exten = s,n,Goto(from-outside,1003,1)
exten = h,1,Hangup()

[inrouter_Routein_feature_dest]

[macro-inrouter_fromU520wan]
exten = s,1,Set(CDR(userfield)=Inbound)
exten = s,n,Set(CALLERID(num)=${IF(${LEN(${CALLERID(num)})>0}?${CALLERID(num)}:Unknown)})
exten = s,n,Set(INROUTERNAME=fromU520wan)
exten = s,n,Set(YSDETECTFAX=no)
exten = s,n,Set(YSARG=${ARG2})
exten = s,n,YsWalkContext(mobile-exten-callingrule,${CALLERID(num)},1,${CALLERID(num)},mobile)
exten = s,n,Gotoif(${YSEXISTCONTEXT}>0?mobile-exten-callingrule,${CALLERID(num)},1)
exten = s,n,AGI(/ysdisk/ysapps/pbxcenter/bin/autoclip,get,${CALLERID(num)},${SRCTRUNKNAME})
exten = s,n,Gotoif($[${LEN(${CLIPEXTENSION})}>1]?from-outside,${CLIPEXTENSION},1)
exten = s,n,Goto(ivrs,6500,1)
exten = h,1,Hangup()

[inrouter_fromU520wan_feature_dest]

[macro-inrouter_from_PBX_Branch]
exten = s,1,Set(CDR(userfield)=Inbound)
exten = s,n,Set(CALLERID(num)=${IF(${LEN(${CALLERID(num)})>0}?${CALLERID(num)}:Unknown)})
exten = s,n,Set(INROUTERNAME=from_PBX_Branch)
exten = s,n,Set(YSDETECTFAX=no)
exten = s,n,Set(YSARG=${ARG2})
exten = s,n,YsWalkContext(mobile-exten-callingrule,${CALLERID(num)},1,${CALLERID(num)},mobile)
exten = s,n,Gotoif(${YSEXISTCONTEXT}>0?mobile-exten-callingrule,${CALLERID(num)},1)
exten = s,n,AGI(/ysdisk/ysapps/pbxcenter/bin/autoclip,get,${CALLERID(num)},${SRCTRUNKNAME})
exten = s,n,Gotoif($[${LEN(${CLIPEXTENSION})}>1]?from-outside,${CLIPEXTENSION},1)
exten = s,n,Goto(did_exten_from_PBX_Branch_general,${YSARG},1)
exten = h,1,Hangup()

[did_exten_from_PBX_Branch_general]
exten = 1000,1,Goto(from-outside,1000,1)
exten = 1001,1,Goto(from-outside,1001,1)
exten = 1002,1,Goto(from-outside,1002,1)
exten = 1003,1,Goto(from-outside,1003,1)
exten = 1004,1,Goto(from-outside,1004,1)
exten = 1005,1,Goto(from-outside,1005,1)
exten = 1006,1,Goto(from-outside,1006,1)
exten = 1007,1,Goto(from-outside,1007,1)
exten = 1008,1,Goto(from-outside,1008,1)
exten = 1009,1,Goto(from-outside,1009,1)
exten = 1010,1,Goto(from-outside,1010,1)
exten = 1011,1,Goto(from-outside,1011,1)
exten = 1012,1,Goto(from-outside,1012,1)
exten = 1013,1,Goto(from-outside,1013,1)
exten = 1014,1,Goto(from-outside,1014,1)
exten = 1015,1,Goto(from-outside,1015,1)
exten = 1016,1,Goto(from-outside,1016,1)
exten = 1017,1,Goto(from-outside,1017,1)
exten = 1018,1,Goto(from-outside,1018,1)
exten = 1019,1,Goto(from-outside,1019,1)
exten = 1020,1,Goto(from-outside,1020,1)
exten = 1021,1,Goto(from-outside,1021,1)
exten = 1022,1,Goto(from-outside,1022,1)
exten = 1023,1,Goto(from-outside,1023,1)
exten = 1024,1,Goto(from-outside,1024,1)
exten = 1025,1,Goto(from-outside,1025,1)
exten = 1026,1,Goto(from-outside,1026,1)
exten = 1027,1,Goto(from-outside,1027,1)
exten = 1028,1,Goto(from-outside,1028,1)
exten = 1029,1,Goto(from-outside,1029,1)
exten = 1030,1,Goto(from-outside,1030,1)
exten = 1031,1,Goto(from-outside,1031,1)
exten = 1032,1,Goto(from-outside,1032,1)
exten = 1033,1,Goto(from-outside,1033,1)
exten = 1034,1,Goto(from-outside,1034,1)
exten = 1035,1,Goto(from-outside,1035,1)
exten = 1036,1,Goto(from-outside,1036,1)
exten = 1037,1,Goto(from-outside,1037,1)
exten = 1038,1,Goto(from-outside,1038,1)
exten = 1039,1,Goto(from-outside,1039,1)
exten = 1040,1,Goto(from-outside,1040,1)
exten = 1041,1,Goto(from-outside,1041,1)
exten = 1042,1,Goto(from-outside,1042,1)
exten = 1043,1,Goto(from-outside,1043,1)
exten = 1044,1,Goto(from-outside,1044,1)
exten = 1045,1,Goto(from-outside,1045,1)
exten = 1046,1,Goto(from-outside,1046,1)
exten = 1047,1,Goto(from-outside,1047,1)
exten = 1048,1,Goto(from-outside,1048,1)
exten = 1049,1,Goto(from-outside,1049,1)
[inrouter_from_PBX_Branch_feature_dest]

[macro-inrouter_from_SIPNET]
exten = s,1,Set(CDR(userfield)=Inbound)
exten = s,n,Set(CALLERID(num)=${IF(${LEN(${CALLERID(num)})>0}?${CALLERID(num)}:Unknown)})
exten = s,n,Set(INROUTERNAME=from_SIPNET)
exten = s,n,Set(YSDETECTFAX=no)
exten = s,n,Set(YSARG=${ARG2})
exten = s,n,YsWalkContext(mobile-exten-callingrule,${CALLERID(num)},1,${CALLERID(num)},mobile)
exten = s,n,Gotoif(${YSEXISTCONTEXT}>0?mobile-exten-callingrule,${CALLERID(num)},1)
exten = s,n,AGI(/ysdisk/ysapps/pbxcenter/bin/autoclip,get,${CALLERID(num)},${SRCTRUNKNAME})
exten = s,n,Gotoif($[${LEN(${CLIPEXTENSION})}>1]?from-outside,${CLIPEXTENSION},1)
exten = s,n,Goto(from-outside,1010,1)
exten = h,1,Hangup()

[inrouter_from_SIPNET_feature_dest]

[macro-inrouter_From_1049_Trunk]
exten = s,1,Set(CDR(userfield)=Inbound)
exten = s,n,Set(CALLERID(num)=${IF(${LEN(${CALLERID(num)})>0}?${CALLERID(num)}:Unknown)})
exten = s,n,Set(INROUTERNAME=From_1049_Trunk)
exten = s,n,Set(YSDETECTFAX=no)
exten = s,n,Set(YSARG=${ARG2})
exten = s,n,YsWalkContext(mobile-exten-callingrule,${CALLERID(num)},1,${CALLERID(num)},mobile)
exten = s,n,Gotoif(${YSEXISTCONTEXT}>0?mobile-exten-callingrule,${CALLERID(num)},1)
exten = s,n,AGI(/ysdisk/ysapps/pbxcenter/bin/autoclip,get,${CALLERID(num)},${SRCTRUNKNAME})
exten = s,n,Gotoif($[${LEN(${CLIPEXTENSION})}>1]?from-outside,${CLIPEXTENSION},1)
exten = s,n,Goto(ivrs,6500,1)
exten = h,1,Hangup()

[inrouter_From_1049_Trunk_feature_dest]

[DLPN_DialPlan_ADMIN]
include = Local_Default_CallingRules
include = all_outrouters

[DLPN_DialPlan1000]
include = Local_Default_CallingRules
include = dial_physical_trunk_UMTS1
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_toU520wan
include = outrouter_test
include = outrouter_testsip
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1000]
include = outrouter_toU520wan
include = outrouter_test
include = outrouter_testsip
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1001]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_toU520wan
include = outrouter_testsip
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1001]
include = outrouter_toU520wan
include = outrouter_testsip
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1002]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_toU520wan
include = outrouter_testsip
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1002]
include = outrouter_toU520wan
include = outrouter_testsip
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1003]
include = Local_Default_CallingRules
include = dial_physical_trunk_UMTS1
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_toU520wan
include = outrouter_test
include = outrouter_testsip
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1003]
include = outrouter_toU520wan
include = outrouter_test
include = outrouter_testsip
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1004]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_toU520wan
include = outrouter_testsip
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1004]
include = outrouter_toU520wan
include = outrouter_testsip
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1005]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1005]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1006]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1006]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1007]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1007]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1008]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1008]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1009]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1009]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1010]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1010]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1011]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1011]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1012]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1012]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1013]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1013]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1014]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1014]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1015]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1015]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1016]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1016]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1017]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1017]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1018]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1018]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1019]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1019]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1020]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1020]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1021]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1021]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1022]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1022]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1023]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1023]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1024]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1024]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1025]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1025]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1026]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1026]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1027]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1027]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1028]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1028]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1029]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1029]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1030]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1030]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1031]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1031]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1032]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1032]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1033]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1033]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1034]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1034]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1035]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1035]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1036]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1036]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1037]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1037]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1038]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1038]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1039]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1039]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1040]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1040]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1041]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1041]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1042]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1042]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1043]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1043]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1044]
include = Local_Default_CallingRules
include = dial_physical_trunk_PBX_Branch
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1044]
include = outrouter_to_PBX_Branch
include = outrouter_To_1049_Trunk

[DLPN_DialPlan1045]
include = Local_Default_CallingRules
include = dial_physical_trunk_DUMMY_Trunk
include = outrouter_To_1049_Trunk
[Mobile_DLPN_DialPlan1045]
include = outrouter_To_1049_Trunk

[mobile-exten-callingrule]

[whitelist-inbound]

[blacklist-inbound]

[whitelist-outbound-global]
[whitelist-outbound-exten]

[blacklist-outbound-global]
[blacklist-outbound-exten]

[whitelist-internal]

[blacklist-internal]

[inbound_trunk_UMTS1]
exten = _.,1,YsWalkContext(whitelist-inbound,${EXTEN},1,${CALLERID(num)},inbound)
exten = _.,2,NoOp(NODNIS)
exten = _.,3,Set(CDR(extfield1)=${CALLERID(name)})
exten = _.,4,Set(CHECKCALLERNUM=${CALLERID(num)})
exten = _.,5,Macro(inrouter_Routein,1,${EXTEN})
exten = h,1,HangUp()

[inbound_trunk_DUMMY_Trunk]
exten = _.,1,YsWalkContext(whitelist-inbound,${EXTEN},1,${CALLERID(num)},inbound)
exten = _.,2,NoOp(NODNIS)
exten = _.,3,Set(CDR(extfield1)=${CALLERID(name)})
exten = _.,4,Set(CDR(userfield)=Inbound)
exten = _.,5,Set(GROUP()=trunk-DUMMY_Trunk-endpoint)
exten = _.,6,ExecIf($[${LEN(${trunk-DUMMY_Trunk-endpoint_LIMIT})}>0]?Gotoif($[${GROUP_COUNT()} > ${trunk-DUMMY_Trunk-endpoint_LIMIT}]?h,1)
exten = _.,7,Set(FAXOPT(gateway)=no)
exten = _.,8,Set(JITTERBUFFER(disabled)=)
exten = _.,9,Set(CHECKCALLERNUM=${CALLERID(num)})
exten = _.,10,Macro(inrouter_From_1049_Trunk,1,${EXTEN})
exten = h,1,HangUp()

[inbound_trunk_sipnet.ru]
exten = _.,1,YsWalkContext(whitelist-inbound,${EXTEN},1,${CALLERID(num)},inbound)
exten = _.,2,NoOp(NODNIS)
exten = _.,3,Set(CDR(extfield1)=${CALLERID(name)})
exten = _.,4,Set(GROUP()=trunk-sipnet.ru-endpoint)
exten = _.,5,ExecIf($[${LEN(${trunk-sipnet.ru-endpoint_LIMIT})}>0]?Gotoif($[${GROUP_COUNT()} > ${trunk-sipnet.ru-endpoint_LIMIT}]?h,1)
exten = _.,6,Set(FAXOPT(gateway)=no)
exten = _.,7,Set(JITTERBUFFER(disabled)=)
exten = _.,8,Set(CHECKCALLERNUM=${CALLERID(num)})
exten = _.,9,Macro(inrouter_from_SIPNET,1,${EXTEN})
exten = h,1,HangUp()

[inbound_trunk_PBX_Branch]
exten = _.,1,YsWalkContext(whitelist-inbound,${EXTEN},1,${CALLERID(num)},inbound)
exten = _.,2,NoOp(NODNIS)
exten = _.,3,Set(CDR(extfield1)=${CALLERID(name)})
exten = _.,4,Set(CDR(userfield)=Inbound)
exten = _.,5,Set(GROUP()=trunk-PBX_Branch-endpoint)
exten = _.,6,ExecIf($[${LEN(${trunk-PBX_Branch-endpoint_LIMIT})}>0]?Gotoif($[${GROUP_COUNT()} > ${trunk-PBX_Branch-endpoint_LIMIT}]?h,1)
exten = _.,7,Set(FAXOPT(gateway)=no)
exten = _.,8,Set(JITTERBUFFER(disabled)=)
exten = _.,9,Set(CHECKCALLERNUM=${CALLERID(num)})
exten = 1000,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1001,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1002,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1003,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1004,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1005,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1006,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1007,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1008,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1009,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1010,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1011,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1012,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1013,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1014,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1015,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1016,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1017,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1018,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1019,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1020,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1021,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1022,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1023,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1024,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1025,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1026,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1027,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1028,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1029,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1030,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1031,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1032,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1033,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1034,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1035,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1036,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1037,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1038,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1039,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1040,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1041,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1042,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1043,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1044,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1045,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1046,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1047,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1048,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = 1049,10,Macro(inrouter_from_PBX_Branch,1,${EXTEN})
exten = h,1,HangUp()

[callback_trunk_UMTS1]
exten = h,1,Hangup()
exten = _.,1,Set(CDR(userfield)=Callback)
exten = _.,2,Dial(${trunk_UMTS1}/${EXTEN},${RINGTIME_GLOBAL},${DIALOPTIONS})

[callback_trunk_DUMMY_Trunk]
exten = h,1,Hangup()
exten = _.,1,Set(CDR(userfield)=Callback)
exten = _.,2,Dial(PJSIP/${EXTEN}@trunk-DUMMY_Trunk-endpoint,${RINGTIME_GLOBAL},${DIALOPTIONS})

[callback_trunk_sipnet.ru]
exten = h,1,Hangup()
exten = _.,1,Set(CDR(userfield)=Callback)
exten = _.,2,Dial(PJSIP/${EXTEN}@trunk-sipnet.ru-endpoint,${RINGTIME_GLOBAL},${DIALOPTIONS})

[callback_trunk_PBX_Branch]
exten = h,1,Hangup()
exten = _.,1,Set(CDR(userfield)=Callback)
exten = _.,2,Dial(PJSIP/${EXTEN}@trunk-PBX_Branch-endpoint,${RINGTIME_GLOBAL},${DIALOPTIONS})

[sla_stations]

[emergency-playback]
exten = Emergency,1,Set(CHANNEL(language)=${PLAYLANGUAGE})
exten = Emergency,2,Playback(vm-theperson)
exten = Emergency,3,SayDigits(${SAYNUMBER})
exten = Emergency,4,Playback(dial_emergency)
exten = Emergency,5,SayDigits(${EMERGENCY})
exten = Emergency,6,Hangup()

[emergency-number]

