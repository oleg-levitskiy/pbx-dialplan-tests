[general]
static = yes
writeprotect = no
autofallthrough = yes
clearglobalvars = yes
priorityjumping = no
extenpatternmatchnew = no
static  =  yes
writeprotect  =  no
autofallthrough  =  yes
clearglobalvars  =  yes
priorityjumping  =  no
extenpatternmatchnew  =  no
static   =   yes
writeprotect   =   no
autofallthrough   =   yes
clearglobalvars   =   yes
priorityjumping   =   no
extenpatternmatchnew   =   no
 = 
static   =   yes
writeprotect   =   no
autofallthrough   =   yes
clearglobalvars   =   yes
priorityjumping   =   no
extenpatternmatchnew   =   no
 = 

[globals]
TOUCH_MONITOR_FORMAT = wav_alaw
TOUCH_MIXMONITOR_FORMAT = wav_alaw
DIALOPTIONS = tTkKWwXx
PRESS5TOLEVMSG_ENABLE = 0
ABSOLUTE_TIMEOUT = 6000
RINGTIME = 30
TRANSFER_INCOMING_CALLERID = 0
RINGTIME_5011=5
RINGTIME_5010=5

BIZHOURS_ENABLE=0
trunk_64 = DAHDI/g22
CID_trunk_64 = 
trunk_65 = YSGSM/g23
CID_trunk_65 = 
trunk-E1Trunk1 = DAHDI/g11
CID_trunk-E1Trunk1 = 
trunk-E1Trunk2 = DAHDI/g12
CID_trunk-E1Trunk2 = 
trunk-BriTrunk5 = DAHDI/g25
CID_trunk-BriTrunk5 = 
trunk-BriTrunk6 = DAHDI/g26
CID_trunk-BriTrunk6 = 
trunk-sps-Lync2015_41 = SIP/trunk-sps-Lync2015_41
CID_trunk-sps-Lync2015_41 = 
trunk-sps-Lync2015_41-enable = yes
trunk-spx-testIAX = IAX2/trunk-spx-testIAX
CID_trunk-spx-testIAX = 111111
trunk-spx-testIAX-enable = yes
trunk-spx-testIAXS0 = IAX2/trunk-spx-testIAXS0
CID_trunk-spx-testIAXS0 = 
trunk-spx-testIAXS0-enable = yes
trunk-sps-testS50 = SIP/trunk-sps-testS50
CID_trunk-sps-testS50 = 123465798
trunk-sps-testS50-enable = yes
trunk-sps-toS50_225 = SIP/trunk-sps-toS50_225
CID_trunk-sps-toS50_225 = 74950000000
trunk-sps-toS50_225-enable = yes

#include physical-dial.conf

DIALPARAM_OF_EXTEN601=DAHDI/63
DIALPARAM_OF_EXTEN5000=SIP/5000
DIALPARAM_OF_EXTEN5001=SIP/5001
DIALPARAM_OF_EXTEN5002=SIP/5002
DIALPARAM_OF_EXTEN5003=SIP/5003
DIALPARAM_OF_EXTEN5004=SIP/5004
DIALPARAM_OF_EXTEN5005=SIP/5005
DIALPARAM_OF_EXTEN5006=SIP/5006
DIALPARAM_OF_EXTEN5007=SIP/5007
DIALPARAM_OF_EXTEN5008=SIP/5008
DIALPARAM_OF_EXTEN5009=SIP/5009
DIALPARAM_OF_EXTEN5010=SIP/5010
DIALPARAM_OF_EXTEN5011=SIP/5011
DIALPARAM_OF_EXTEN5012=SIP/5012
DIALPARAM_OF_EXTEN5013=SIP/5013
DIALPARAM_OF_EXTEN5014=SIP/5014
DIALPARAM_OF_EXTEN5015=SIP/5015
DIALPARAM_OF_EXTEN5016=SIP/5016
DIALPARAM_OF_EXTEN5017=SIP/5017
DIALPARAM_OF_EXTEN5018=SIP/5018
DIALPARAM_OF_EXTEN5019=SIP/5019
DIALPARAM_OF_EXTEN5020=SIP/5020
DIALPARAM_OF_EXTEN5021=SIP/5021
DIALPARAM_OF_EXTEN5022=SIP/5022
DIALPARAM_OF_EXTEN5023=SIP/5023
DIALPARAM_OF_EXTEN5024=SIP/5024
DIALPARAM_OF_EXTEN5025=SIP/5025
DIALPARAM_OF_EXTEN5026=SIP/5026
DIALPARAM_OF_EXTEN5027=SIP/5027
DIALPARAM_OF_EXTEN5028=SIP/5028
DIALPARAM_OF_EXTEN5029=SIP/5029
DIALPARAM_OF_EXTEN5030=SIP/5030
DIALPARAM_OF_EXTEN5031=SIP/5031
DIALPARAM_OF_EXTEN5032=SIP/5032
DIALPARAM_OF_EXTEN5033=SIP/5033
DIALPARAM_OF_EXTEN5034=SIP/5034
DIALPARAM_OF_EXTEN5035=SIP/5035
DIALPARAM_OF_EXTEN5036=SIP/5036
DIALPARAM_OF_EXTEN5037=SIP/5037
DIALPARAM_OF_EXTEN5038=SIP/5038
DIALPARAM_OF_EXTEN5039=SIP/5039
DIALPARAM_OF_EXTEN5040=SIP/5040
DIALPARAM_OF_EXTEN5041=SIP/5041
DIALPARAM_OF_EXTEN5042=SIP/5042
DIALPARAM_OF_EXTEN5043=SIP/5043
DIALPARAM_OF_EXTEN5044=SIP/5044
DIALPARAM_OF_EXTEN5045=SIP/5045
DIALPARAM_OF_EXTEN5046=SIP/5046
DIALPARAM_OF_EXTEN5047=SIP/5047
DIALPARAM_OF_EXTEN5048=SIP/5048
DIALPARAM_OF_EXTEN5049=SIP/5049

[Local_Default_CallingRules]
include = set-cf-default
include = en-always-cf
include = dis-always-cf
include = en-busy-cf
include = dis-busy-cf
include = en-noanswer-cf
include = dis-noanswer-cf
include = set-cf-number
include = set-cf-vm
include = en-dnd
include = dis-dnd
include = vmm
include = account-code-check
include = en-force-to-outside
include = dis-force-to-outside
include = en-force-to-inside
include = force-to-businesshours
include = parkedcalls
include = conferences
include = ringgroups
include = voicemenus
include = queues
include = voicemailgroups
include = pagegroups
include = page_an_extension
include = pickup_specific_extension
include = speed-dial-match
include = default
[macro-stdPrivacyexten]
exten => s,1,Dial(${ARG2},20,p)
exten => s,2,Goto(s-${DIALSTATUS},1)
exten => s-NOANSWER,1,Voicemail(u${ARG1})
exten => s-NOANSWER,2,Goto(default,s,1)
exten => s-BUSY,1,Voicemail(b${ARG1})
exten => s-BUSY,2,Goto(default,s,1)
exten => s-DONTCALL,1,Goto(${ARG3},s,1)
exten => s-TORTURE,1,Goto(${ARG4},s,1)
exten => _s-.,1,Goto(s-NOANSWER,1)
exten => a,1,VoicemailMain()
[macro-timecondition]
exten = s,1,GotoIf(${DB(OfficeHours/ForceToOutside)}?s,24:s,2)
exten = s,2,GotoIf($[${TIMECON_ENABLE} = 1]?3:25)
exten = s,3,GotoIfTime(${Mon_am},mon,*,*?${ARG1},${ARG2},${ARG3})
exten = s,4,GotoIfTime(${Mon_pm},mon,*,*?${ARG1},${ARG2},${ARG3})
exten = s,5,GotoIfTime(${Mon_ot},mon,*,*?${ARG1},${ARG2},${ARG3})
exten = s,6,GotoIfTime(${Tue_am},tue,*,*?${ARG1},${ARG2},${ARG3})
exten = s,7,GotoIfTime(${Tue_pm},tue,*,*?${ARG1},${ARG2},${ARG3})
exten = s,8,GotoIfTime(${Tue_ot},tue,*,*?${ARG1},${ARG2},${ARG3})
exten = s,9,GotoIfTime(${Wed_am},wed,*,*?${ARG1},${ARG2},${ARG3})
exten = s,10,GotoIfTime(${Wed_pm},wed,*,*?${ARG1},${ARG2},${ARG3})
exten = s,11,GotoIfTime(${Wed_ot},wed,*,*?${ARG1},${ARG2},${ARG3})
exten = s,12,GotoIfTime(${Thu_am},thu,*,*?${ARG1},${ARG2},${ARG3})
exten = s,13,GotoIfTime(${Thu_pm},thu,*,*?${ARG1},${ARG2},${ARG3})
exten = s,14,GotoIfTime(${Thu_ot},thu,*,*?${ARG1},${ARG2},${ARG3})
exten = s,15,GotoIfTime(${Fri_am},fri,*,*?${ARG1},${ARG2},${ARG3})
exten = s,16,GotoIfTime(${Fri_pm},fri,*,*?${ARG1},${ARG2},${ARG3})
exten = s,17,GotoIfTime(${Fri_ot},fri,*,*?${ARG1},${ARG2},${ARG3})
exten = s,18,GotoIfTime(${Sat_am},sat,*,*?${ARG1},${ARG2},${ARG3})
exten = s,19,GotoIfTime(${Sat_pm},sat,*,*?${ARG1},${ARG2},${ARG3})
exten = s,20,GotoIfTime(${Sat_ot},sat,*,*?${ARG1},${ARG2},${ARG3})
exten = s,21,GotoIfTime(${Sun_am},sun,*,*?${ARG1},${ARG2},${ARG3})
exten = s,22,GotoIfTime(${Sun_pm},sun,*,*?${ARG1},${ARG2},${ARG3})
exten = s,23,GotoIfTime(${Sun_ot},sun,*,*?${ARG1},${ARG2},${ARG3})
exten = s,24,Goto(${ARG4},${ARG5},${ARG6})
exten = s,25,Goto(${ARG1},${ARG2},${ARG3})
[macro-stdexten]
exten = s,1,Set(IsFromOutside=0)
exten = s,2,Gotoif($[${LEN(${FromSystemAlert})}>0]?sys-dial,1)
exten = s,3,GotoIf(${DB_EXISTS(${GETNAMEBYCALLERID(${CALLERID(num)})}/blackwhite)}?s,4:s,5)
exten = s,4,GotoIf( $[${DB_RESULT} = 1]?out_userwhite,1:out_userblack,1)
exten = s,5,GotoIf(${DB_EXISTS(oblacklist/${ARG1})}?Blacklist-Handle,s,1)
exten = s,6,Set(DID_INBOUND_TRUNK_VARIABLE=${IF($[${MACRO_CONTEXT:0:17}=DID_inbound_trunk]?1)})
exten = s,7,GotoIf(${DB_EXISTS(oblacklist/${ARG1})}?Blacklist-Handle,s,1)
exten = s,8,Set(DID_INBOUND_TRUNK_VARIABLE=${IF($[${MACRO_CONTEXT:0:17}=DID_inbound_trunk]?1)})
exten = s,n,Macro(realstexten,${ARG1},${DIALPARAM_OF_EXTEN${ARG1}},${DIALOPTIONS})
exten = sys-dial,1,Macro(sysdial,${DIALPARAM_OF_EXTEN${ARG1}},${RINGTIME},${DIALOPTIONS})
exten = out_userblack,1,GotoIf(${DB_EXISTS(${GETNAMEBYCALLERID(${CALLERID(num)})}/oblack-${ARG1})}?Unknown-Handle,s,1:s,5)
exten = out_userwhite,1,GotoIf(${DB_EXISTS(${GETNAMEBYCALLERID(${CALLERID(num)})}/owhite-${ARG1})}?s,5:Unknown-Handle,s,1)
[macro-stdexten-fromoutside]
exten = s,1,Set(IsFromOutside=1)
exten = s,2,Macro(realstexten,${ARG1},${ARG2},${DIALOPTIONS})
[macro-realstexten]
exten = s,1,Set(DYNAMIC_FEATURES=twstart)
exten = s,2,Set(${IF($[${LEN(${DID_INBOUND_TRUNK_VARIABLE})} > 0]?CDR(userfield)=s)})
exten = s,3,GotoIf(${DB_EXISTS(blacklist/${CALLERID(num)})}?Blacklist-Handle,s,1)
exten = s,4,GotoIf(${DB_EXISTS(${ARG1}/blackwhite)}?s,5:s,6)
exten = s,5,GotoIf( $[${DB_RESULT} = 1]?in_userwhite,1:in_userblack,1)
exten = s,6,Set(TIMEOUT(absolute)=${ABSOLUTE_TIMEOUT})
exten = s,n,GotoIf(${DB_EXISTS(faxexten/${ARG1})}?fax-extens,${ARG1},1)
exten = s,n,Set(CKTSETTRANSFER=0)
exten = s,n,Set(REALARG1=${ARG1})
exten = s,n,GotoIf(${DB(CFA/${REALARG1})}>0?follow-me,1)
exten = s,n,GotoIf(${DB(DND/${REALARG1})}>0?vm-u,1)
exten = s,n,Set(RINGTIME=${IF($[${LEN(${RINGTIME_${REALARG1}})} > 0]?${RINGTIME_${REALARG1}}:${RINGTIME})})
exten = s,n,CktStdCall(srtpfor,${ARG2},novalue)
exten = s,n,Set(_SIPSRTP=${SIPPEER(${CKTSTDCALLRESULT},srtpcapable)})
exten = s,n,Dial(${ARG2},${RINGTIME},${ARG3})
exten = s,n,Goto(s-${DIALSTATUS},1)
exten = s-NOANSWER,1,GotoIf(${DB(CFN/${REALARG1})}>0?follow-me,1:1-out,1)
exten = s-BUSY,1,GotoIf(${DB(CFB/${ARG1})}>0?follow-me-busy,1:1-out,1)
exten = s-ANSWER,1,Hangup
exten = cktcheck,1,Set(CKTSETTRANSFER=0)
exten = cktcheck,4,Hangup()
exten = _s-.,1,GotoIf(${CKTSETTRANSFER}>0?cktcheck,1)
exten = _s-.,n,Goto(s-NOANSWER,1)
exten = follow-me,1,GotoIf(${DB(CFD/${REALARG1})}>0?vm-u,1)
exten = follow-me,2,Set(cfnum=${DB(CF/${REALARG1})})
exten = follow-me,3,GotoIf($[${LEN(${cfnum})}<1]?vm-u,1))
exten = follow-me,4,GotoIf($["${cfnum}" = "${REALARG1}"]?vm-u,1)
exten = follow-me,5,Set(IsFollowme=${IF($[${IsFromOutside} = 1]?1:0)})
exten = follow-me,6,Followme(${REALARG1},n)
exten = follow-me,7,Goto(vm-u,1)
exten = vm-u,1,GotoIf($[${PRESS5TOLEVMSG_ENABLE} = 1]?vm-u,2:vm-unavail,1)
exten = vm-u,n,playback(/var/spool/asterisk/voicemail/default/${REALARG1}/unavail)
exten = vm-u,n,Playback(vm-leavemsg)
exten = vm-u,n,Read(digito,,1,,,3)
exten = vm-u,n,GotoIf($[${digito}=5]?vm-s,1)
exten = vm-u,n,playback(/var/spool/asterisk/voicemail/default/${REALARG1}/unavail)
exten = vm-u,n,Playback(vm-leavemsg)
exten = vm-u,n,Read(digito,,1,,,4)
exten = vm-u,n,GotoIf($[${digito}=5]?vm-s,1)
exten = vm-u,n,playback(/var/spool/asterisk/voicemail/default/${REALARG1}/unavail)
exten = vm-u,n,Playback(vm-leavemsg)
exten = vm-u,n,Read(digito,,1,,,3)
exten = vm-u,n,GotoIf($[${digito}=5]?vm-s,1)
exten = vm-u,n,Hangup()
exten = follow-me-busy,1,GotoIf(${DB(CFD/${REALARG1})}>0?vm-b,1)
exten = follow-me-busy,2,Set(cfnum=${DB(CF/${REALARG1})})
exten = follow-me-busy,3,GotoIf($[${LEN(${cfnum})}<1]?vm-b,1)
exten = follow-me-busy,4,GotoIf($["${cfnum}" = "${REALARG1}"]?vm-b,1)
exten = follow-me-busy,5,Set(IsFollowme=${IF($[${IsFromOutside} = 1]?1:0)})
exten = follow-me-busy,6,Followme(${REALARG1},n)
exten = follow-me-busy,7,Goto(vm-b,1)
exten = vm-b,1,GotoIf($[${PRESS5TOLEVMSG_ENABLE} = 1]?vm-b,2:vm-busy,1)
exten = vm-b,n,playback(/var/spool/asterisk/voicemail/default/${REALARG1}/busy)
exten = vm-b,n,Playback(vm-leavemsg)
exten = vm-b,n,Read(digito,,1,,,3)
exten = vm-b,n,GotoIf($[${digito}=5]?vm-s,1)
exten = vm-b,n,playback(/var/spool/asterisk/voicemail/default/${REALARG1}/busy)
exten = vm-b,n,Playback(vm-leavemsg)
exten = vm-b,n,Read(digito,,1,,,4)
exten = vm-b,n,GotoIf($[${digito}=5]?vm-s,1)
exten = vm-b,n,playback(/var/spool/asterisk/voicemail/default/${REALARG1}/busy)
exten = vm-b,n,Playback(vm-leavemsg)
exten = vm-b,n,Read(digito,,1,,,3)
exten = vm-b,n,GotoIf($[${digito}=5]?vm-s,1)
exten = vm-b,n,Hangup()
exten = vm-unavail,1,Voicemail(${REALARG1},u)
exten = vm-unavail,n,Hangup()
exten = vm-busy,1,Voicemail(${REALARG1},b)
exten = vm-busy,n,Hangup()
exten = vm-s,1,Voicemail(${REALARG1},s)
exten = vm-s,n,Hangup()
exten = in_userblack,1,GotoIf(${DB_EXISTS(${ARG1}/iblack-${GETNAMEBYCALLERID(${CALLERID(num)})})}?Unkown-Handle,s,1:s,6)
exten = in_userwhite,1,GotoIf( ${DB_EXISTS(${ARG1}/iwhite-${GETNAMEBYCALLERID(${CALLERID(num)})})}?s,6:Unkown-Handle,s,1)
exten = 1-out,1,Hangup()
[macro-trunkdial-failover-0.3]
exten = s,1,NOOP(do call out)
exten = s,2,GotoIf(${DB_EXISTS(${GETNAMEBYCALLERID(${CALLERID(num)})}/blackwhite)}?s,3:s,4)
exten = s,3,GotoIf( $[${DB_RESULT} = 1]?out_userwhite,1:out_userblack,1)
exten = s,4,GotoIf(${DB_EXISTS(oblacklist/${ARG3})}?Blacklist-Handle,s,1)
exten = s,5,Gotoif($[${LEN(${FromSystemAlert})}>0]?8:6)
exten = s,6,Gotoif($[${LEN(${ARG$[${ARG1}+4]})}>0]?7:8)
exten = s,7,Goto(s,6)
exten = s,8,Set(TCOUNT=4)
exten = s,n,Set(CDR(userfield)=Outbound)
exten = s,n,Set(OldCallerID=${IF($[${LEN(${PINUSER_CONTEXT})} > 0]?${PINUSER_CONTEXT:13}:${GETNAMEBYCALLERID(${CALLERID(num)})})})
exten = s,n,Set(TOUCH_MONITOR=${OldCallerID}-${ARG3})
exten = s,n,NOOP(${DOD_${ARG${TCOUNT}}_${OldCallerID}})
exten = s,n,Set(TIMEOUT(absolute)=${IF($[${LEN(${ABSOLUTE_TIMEOUT_${OldCallerID}})} > 0]?${ABSOLUTE_TIMEOUT_${OldCallerID}}:${ABSOLUTE_TIMEOUT})})
exten = s,n,Set(DLSTAT=UNKNOW})
exten = s,n,SetCktCustom(sendrpid,yes,yes)
exten = s,n,Gotoif(${ARG1}>0?1-dial,1)
exten = 1-dial,1,Gotoif($[$[${TCOUNT}-3]>${ARG1}]?nextrouter,1)
exten = 1-dial,2,Gotoif($[${LEN(${DOD_${ARG${TCOUNT}}_${OldCallerID}})} > 2]?setdod,1:1-dial,3)
exten = 1-dial,3,Set(CALLERID(name)=${IF($[${LEN(${CID_${ARG${TCOUNT}}})} > 2]?${CID_${ARG${TCOUNT}}}:${CALLERID(name)})})
exten = 1-dial,4,Set(CALLERID(num)=${IF($[${LEN(${CID_${ARG${TCOUNT}}})} > 2]?${CID_${ARG${TCOUNT}}}:${CALLERID(num)})})
exten = 1-dial,5,GotoIf($[${LEN(${${ARG${TCOUNT}}-enable})} = 2 ]?status-disable,1)
exten = 1-dial,6,Set(_SIPSRTP=${SIPPEER(${ARG${TCOUNT}},srtpcapable)})
exten = 1-dial,7,Set(OUTDIALOPT=${IF($[${LEN(${GSM_${ARG${TCOUNT}}})} > 0]?tTkKWwXxr:${DIALOPTIONS})})
exten = 1-dial,8,NOOP(null for std)
exten = 1-dial,9,Gotoif($[${LEN(${FromSystemAlert})}>0]?sys-dial,1)
exten = 1-dial,10,Dial(${${ARG${TCOUNT}}}/${ARG2}${PREFIX_${ARG${TCOUNT}}}${ARG3},,${OUTDIALOPT})
exten = 1-dial,n,Goto(1-${DIALSTATUS},1)
exten = sys-dial,1,Macro(sysdial,${${ARG${TCOUNT}}}/${ARG2}${PREFIX_${ARG${TCOUNT}}}${ARG3},,${OUTDIALOPT})
exten = setdod,1,Set(CALLERID(name)=${DOD_${ARG${TCOUNT}}_${OldCallerID}})
exten = setdod,2,Set(CALLERID(num)=${DOD_${ARG${TCOUNT}}_${OldCallerID}})
exten = setdod,3,Goto(1-dial,5)
exten = 1-BUSY,1,Set(DLSTAT=9-${DIALSTATUS})
exten = 1-BUSY,2,Goto(2-dial,1)
exten = 1-CHANUNAVAIL,1,Set(DLSTAT=9-${DIALSTATUS})
exten = 1-CHANUNAVAIL,2,Goto(2-dial,1))
exten = 1-CONGESTION,1,Set(DLSTAT=9-${DIALSTATUS})
exten = 1-CONGESTION,2,Goto(2-dial,1)
exten = 2-dial,1,Set(TCOUNT=$[${TCOUNT}+1])
exten = 2-dial,2,Goto(1-dial,1)
exten = 1-out,1,playback(all-busy-now-try-call-later,noanswer)
exten = 1-out,2,Hangup()
exten = 9-BUSY,1,playback(all-busy-now-try-call-later,noanswer)
exten = 9-BUSY,2,Hangup()
exten = 9-CHANUNAVAIL,1,playback(all-busy-now-try-call-later,noanswer)
exten = 9-CHANUNAVAIL,2,Hangup()
exten = 9-CONGESTION,1,playback(all-busy-now-try-call-later,noanswer)
exten = 9-CONGESTION,2,Hangup()
exten = nextrouter,1,GotoIf($[${LEN(${NEXTROUTER})} > 0]?${NEXTROUTER},${ORGINEXTEN},1:${DLSTAT},1)
exten = status-disable,1,Noop(please enable trunk!!!)
exten = h,1,NOOP(no thing to do)
exten = out_userblack,1,GotoIf(${DB_EXISTS(${GETNAMEBYCALLERID(${CALLERID(num)})}/oblack-${ARG3})}?Unknown-Handle,s,1:s,4)
exten = out_userwhite,1,GotoIf(${DB_EXISTS(${GETNAMEBYCALLERID(${CALLERID(num)})}/owhite-${ARG3})}?s,4:Unknown-Handle,s,1)
[macro-sysdial]
exten = s,1,Set(CALLERID(num)=Alarm)
exten = s,2,Set(CALLERID(name)=Alarm)
exten = s,3,Dial(${ARG1},${ARG2},${ARG3})
exten = s,4,Goto(sys-${DIALSTATUS},1)
exten = sys-ANSWER,1,Hangup()
[macro-trunkdial-failover-0.4]
exten = s,1,GotoIf($[${ARG1}==0]?h,1:s,2)
exten = s,2,GotoIf(${DB_EXISTS(${GETNAMEBYCALLERID(${CALLERID(num)})}/blackwhite)}?s,3:s,4)
exten = s,3,GotoIf( $[${DB_RESULT} = 1]?out_userwhite,1:out_userblack,1)
exten = s,4,GotoIf(${DB_EXISTS(oblacklist/${ARG3})}?Blacklist-Handle,s,1)
exten = s,5,Gotoif($[${LEN(${FromSystemAlert})}>0]?8:6)
exten = s,6,Gotoif($[${LEN(${ARG$[${ARG1}+4]})}>0]?7:8)
exten = s,7,Goto(s,6)
exten = s,8,Set(TCOUNT=4)
exten = s,n,Set(CDR(userfield)=Outbound)
exten = s,n,Set(OldCallerID=${IF($[${LEN(${PINUSER_CONTEXT})} > 0]?${PINUSER_CONTEXT:13}:${GETNAMEBYCALLERID(${CALLERID(num)})})})
exten = s,n,Set(TOUCH_MONITOR=${OldCallerID}-${ARG3})
exten = s,n,NOOP(${DOD_${ARG${TCOUNT}}_${OldCallerID}})
exten = s,n,Set(TIMEOUT(absolute)=${IF($[${LEN(${ABSOLUTE_TIMEOUT_${OldCallerID}})} > 0]?${ABSOLUTE_TIMEOUT_${OldCallerID}}:${ABSOLUTE_TIMEOUT})})
exten = s,n,Set(DLSTAT=UNKNOW})
exten = s,n,SetCktCustom(sendrpid,yes,yes)
exten = s,n,Gotoif(${ARG1}>0?1-dial,1)
exten = 1-dial,1,Gotoif($[$[${TCOUNT}-3]>${ARG1}]?nextrouter,1)
exten = 1-dial,2,Gotoif($["${IsTrunkInbound}" = "1"]?6:3)
exten = 1-dial,3,Gotoif($[${LEN(${DOD_${ARG${TCOUNT}}_${OldCallerID}})} > 2]?setdod,1:1-dial,4)
exten = 1-dial,4,Set(CALLERID(name)=${IF($[${LEN(${CID_${ARG${TCOUNT}}})} > 2]?${CID_${ARG${TCOUNT}}}:${CALLERID(name)})})
exten = 1-dial,5,Set(CALLERID(num)=${IF($[${LEN(${CID_${ARG${TCOUNT}}})} > 2]?${CID_${ARG${TCOUNT}}}:${CALLERID(num)})})
exten = 1-dial,6,GotoIf($[${${ARG${TCOUNT}}-enable}=0]?status-disable,1)
exten = 1-dial,7,Set(_SIPSRTP=${SIPPEER(${ARG${TCOUNT}},srtpcapable)})
exten = 1-dial,8,Set(OUTDIALOPT=${IF($[${LEN(${GSM_${ARG${TCOUNT}}})} > 0]?tTkKWwXxr:${DIALOPTIONS})})
exten = 1-dial,9,NOOP(null for std)
exten = 1-dial,10,Gotoif($[${LEN(${FromSystemAlert})}>0]?sys-dial,1)
exten = 1-dial,11,Dial(${${ARG${TCOUNT}}}/${ARG2}${PREFIX_${ARG${TCOUNT}}}${ARG3},,${OUTDIALOPT})
exten = 1-dial,n,Goto(1-${DIALSTATUS},1)
exten = sys-dial,1,Macro(sysdial,${${ARG${TCOUNT}}}/${ARG2}${PREFIX_${ARG${TCOUNT}}}${ARG3},,${OUTDIALOPT})
exten = setdod,1,Set(CALLERID(name)=${DOD_${ARG${TCOUNT}}_${OldCallerID}})
exten = setdod,2,Set(CALLERID(num)=${DOD_${ARG${TCOUNT}}_${OldCallerID}})
exten = setdod,3,Goto(1-dial,6)
exten = 1-BUSY,1,Set(DLSTAT=9-${DIALSTATUS})
exten = 1-BUSY,2,Goto(2-dial,1)
exten = 1-CHANUNAVAIL,1,Set(DLSTAT=9-${DIALSTATUS})
exten = 1-CHANUNAVAIL,2,Goto(2-dial,1))
exten = 1-CONGESTION,1,Set(DLSTAT=9-${DIALSTATUS})
exten = 1-CONGESTION,2,Goto(2-dial,1)
exten = 2-dial,1,Set(TCOUNT=$[${TCOUNT}+1])
exten = 2-dial,2,Goto(1-dial,1)
exten = nextrouter,1,GotoIf($[${LEN(${NEXTROUTER})} > 0]?${NEXTROUTER},${ORGINEXTEN},1)
exten = status-disable,1,Noop(please enable trunk!!!)
exten = h,1,NOOP(no thing to do)
exten = out_userblack,1,GotoIf(${DB_EXISTS(${GETNAMEBYCALLERID(${CALLERID(num)})}/oblack-${ARG3})}?Unknown-Handle,s,1:s,4)
exten = out_userwhite,1,GotoIf(${DB_EXISTS(${GETNAMEBYCALLERID(${CALLERID(num)})}/owhite-${ARG3})}?s,4:Unknown-Handle,s,1)
[macro-pagingintercom]
exten = s,1,SIPAddHeader(Alert-Info:Ring Answer)
exten = s,n,SIPAddHeader(Call-Info:<uri>\;answer-after=0)
exten = s,n,Page(${ARG1},${ARG2})
exten = s,n,Hangup
[Always-Hangup]
exten = s,1,Hangup
[Blacklist-Handle]
exten = s,1,Answer()
exten = s,n,wait(1)
exten = s,n,playback(ss-noservice)
exten = s,n,Hangup()
[chanspy-invalid]
exten = s,1,Hangup
[voicemailgroups]
[directory]
[pri_income]
[macro-trunkdial-t38fax]
exten = s,1,Wait(1)
exten = s,2,Gotoif($[${LEN(${FromSystemAlert})}>0]?5:3)
exten = s,3,Gotoif($[${LEN(${ARG$[${ARG1}+4]})}>0]?4:5)
exten = s,4,Authenticate(${ARG$[${ARG1}+4]})
exten = s,5,Set(TCOUNT=4)
exten = s,n,Set(CDR(userfield)=Outbound)
exten = s,n,Set(TOUCH_MONITOR=${CALLERID(num)}-${ARG3})
exten = s,n,noop(${DOD_${ARG${TCOUNT}}_${CALLERID(num)}})
exten = s,n,Gotoif($[${LEN(${FromSystemAlert})}>0]?sys-dial,1)
exten = s,n,Gotoif(${ARG1}>0?1-dial,1)
exten = 1-dial,1,Gotoif($[$[${TCOUNT}-3]>${ARG1}]?1-out,1)
exten = 1-dial,2,Gotoif($[${LEN(${DOD_${ARG${TCOUNT}}_${CALLERID(num)}})} > 2]?setdod,1:1-dial,3)
exten = 1-dial,3,Set(CALLERID(num)=${IF($[${LEN(${CID_${ARG${TCOUNT}}})} > 2]?${CID_${ARG${TCOUNT}}}:${CALLERID(num)})})
exten = 1-dial,4,Dial(${${ARG${TCOUNT}}}/${ARG2}${PREFIX_${ARG${TCOUNT}}}${ARG3},,tTkKWwXxb)
exten = 1-dial,5,Goto(1-${DIALSTATUS},1)
exten = sys-dial,1,Macro(sysdial,${${ARG${TCOUNT}}}/${ARG2}${PREFIX_${ARG${TCOUNT}}}${ARG3},,${OUTDIALOPT})
exten = setdod,1,Set(CALLERID(name)=${DOD_${ARG${TCOUNT}}_${CALLERID(num)}})
exten = setdod,2,Set(CALLERID(num)=${DOD_${ARG${TCOUNT}}_${CALLERID(num)}})
exten = setdod,3,Goto(1-dial,4)
exten = 1-BUSY,1,Goto(2-dial,1)
exten = 1-CHANUNAVAIL,1,Goto(2-dial,1))
exten = 1-CONGESTION,1,Goto(2-dial,1)
exten = 2-dial,1,Set(TCOUNT=$[${TCOUNT}+1])
exten = 2-dial,2,Goto(1-dial,1)
exten = 1-out,1,playback(all-busy-now-try-call-later)
exten = 1-out,2,Hangup()
exten = h,1,NOOP(no thing to do)
[asterisk_guitools]
exten = executecommand,1,System(${command})
exten = executecommand,n,Hangup()
exten = record_vmenu,1,Set(CHANNEL(language)=ru)
exten = record_vmenu,n,Answer
exten = record_vmenu,n,Playback(vm-intro)
exten = record_vmenu,n,Record(${var1},,,kS)
exten = record_vmenu,n,Set(CHANNEL(language)=ru)
exten = record_vmenu,n,Playback(vm-saved)
exten = record_vmenu,n,Playback(vm-goodbye)
exten = record_vmenu,n,Hangup
exten = play_file,1,Answer
exten = play_file,n,Playback(${var1})
exten = play_file,n,Hangup
[default]
exten = .,1,Goto(${EXTEN})
exten = _#.,1,VoiceMail(${EXTEN:1}@default,u)
exten = _#.,2,hangup
exten = h,1,NOOP(no thing to do)
exten = h,2,Hangup()
exten = *2,1,VoiceMailMain(${CONTEXT:13}@default)
[pickup_specific_extension]
exten = _*04.,1,Set(lockresult=${LOCK(YEASTARCKTMUTEX)})
exten = _*04.,2,GotoIf($[${lockresult}=1]?7)
exten = _*04.,3,WAIT(2)
exten = _*04.,4,Set(lockresult=${LOCK(YEASTARCKTMUTEX)})
exten = _*04.,5,GotoIf($[${lockresult}=0]?6:7)
exten = _*04.,6,Hangup
exten = _*04.,7,Pickup(${EXTEN:3}@PICKUPMARK)
exten = _*04.,8,Set(unlockresult=${UNLOCK(YEASTARCKTMUTEX)})
[page_an_extension]
exten = _*5.,1,Macro(pagingintercom,SIP/${EXTEN:2},d)
[set-cf-default]
exten = #70,1,Answer
exten = #70,n,Set(DB(CFD/${CONTEXT:13})=1)
exten = #70,n,Set(DB(CFB/${CONTEXT:13})=1)
exten = #70,n,Set(DB(CFN/${CONTEXT:13})=1)
exten = #70,n,Set(DB(CFA/${CONTEXT:13})=0)
exten = #70,n,Set(DB(DND/${CONTEXT:13})=0)
exten = #70,n,Wait(1)
exten = #70,n,Playback(beep)
exten = #70,n,Wait(1)
exten = #70,n,Hangup()
[en-always-cf]
exten = *71,1,Answer
exten = *71,n,Set(DB(CFA/${CONTEXT:13})=1)
exten = *71,n,Wait(1)
exten = *71,n,Playback(beep)
exten = *71,n,Wait(1)
exten = *71,n,Hangup()
[dis-always-cf]
exten = *071,1,Answer
exten = *071,n,Set(DB(CFA/${CONTEXT:13})=0)
exten = *071,n,Wait(1)
exten = *071,n,Playback(beep)
exten = *071,n,Wait(1)
exten = *071,n,Hangup()
[en-busy-cf]
exten = *72,1,Answer
exten = *72,n,Set(DB(CFB/${CONTEXT:13})=1)
exten = *72,n,Wait(1)
exten = *72,n,Playback(beep)
exten = *72,n,Wait(1)
exten = *72,n,Hangup()
[dis-busy-cf]
exten = *072,1,Answer
exten = *072,n,Set(DB(CFB/${CONTEXT:13})=0)
exten = *072,n,Wait(1)
exten = *072,n,Playback(beep)
exten = *072,n,Wait(1)
exten = *072,n,Hangup()
[en-noanswer-cf]
exten = *73,1,Answer
exten = *73,n,Set(DB(CFN/${CONTEXT:13})=1)
exten = *73,n,Wait(1)
exten = *73,n,Playback(beep)
exten = *73,n,Wait(1)
exten = *73,n,Hangup()
[dis-noanswer-cf]
exten = *073,1,Answer
exten = *073,n,Set(DB(CFN/${CONTEXT:13})=0)
exten = *073,n,Wait(1)
exten = *073,n,Playback(beep)
exten = *073,n,Wait(1)
exten = *073,n,Hangup()
[set-cf-number]
exten = *74,1,Answer
exten = *74,n,Set(DB(CFD/${CONTEXT:13})=0)
exten = *74,n,Wait(1)
exten = *74,n,Playback(beep)
exten = *74,n,Wait(1)
exten = *74,n,Hangup()
exten = _*74.,1,Answer
exten = _*74.,n,Set(DB(CFD/${CONTEXT:13})=0)
exten = _*74.,n,Set(DB(CF/${CONTEXT:13})=${EXTEN:3})
exten = _*74.,n,Wait(1)
exten = _*74.,n,Playback(beep)
exten = _*74.,n,Wait(1)
exten = _*74.,n,Hangup()
[set-cf-vm]
exten = *074,1,Answer
exten = *074,n,Set(DB(CFD/${CONTEXT:13})=1)
exten = *074,n,Wait(1)
exten = *074,n,Playback(beep)
exten = *074,n,Wait(1)
exten = *074,n,Hangup()
[en-dnd]
exten = *75,1,Answer
exten = *75,n,Set(DB(DND/${CONTEXT:13})=1)
exten = *75,n,Wait(1)
exten = *75,n,Playback(beep)
exten = *75,n,Wait(1)
exten = *75,n,Hangup()
[dis-dnd]
exten = *075,1,Answer
exten = *075,n,Set(DB(DND/${CONTEXT:13})=0)
exten = *075,n,Wait(1)
exten = *075,n,Playback(beep)
exten = *075,n,Wait(1)
exten = *075,n,Hangup()
[vmm]
exten = *02,1,VoiceMailMain()
[chan-spy-normal]
exten = _#90X.,1,Noop(going to spy)
 same = n,Set(PRILEN=${LEN(#90)})
 same = n,GotoIf(${DB_EXISTS(allowspy/${EXTEN:${PRILEN}})}?:chanspy-invalid,s,1)
 same = n,GotoIf(${LEN(${DIALPARAM_OF_EXTEN${EXTEN:${PRILEN}}})}?:chanspy-invali,s,1)
 same = n,Answer
 same = n,Wait(1)
 same = n,ChanSpy(${DIALPARAM_OF_EXTEN${EXTEN:${PRILEN}}},q)
 same = n,Hangup
[chan-spy-whisper]
exten = _*91X.,1,Noop(going to spy)
 same = n,Set(PRILEN=${LEN(*91)})
 same = n,GotoIf(${DB_EXISTS(allowspy/${EXTEN:${PRILEN}})}?:chanspy-invalid,s,1)
 same = n,GotoIf(${LEN(${DIALPARAM_OF_EXTEN${EXTEN:${PRILEN}}})}?:chanspy-invali,s,1)
 same = n,Answer
 same = n,Wait(1)
 same = n,ChanSpy(${DIALPARAM_OF_EXTEN${EXTEN:${PRILEN}}},wq)
 same = n,Hangup
[chan-spy-barge]
exten = _*92X.,1,Noop(going to spy)
 same = n,Set(PRILEN=${LEN(*92)})
 same = n,GotoIf(${DB_EXISTS(allowspy/${EXTEN:${PRILEN}})}?:chanspy-invalid,s,1)
 same = n,GotoIf(${LEN(${DIALPARAM_OF_EXTEN${EXTEN:${PRILEN}}})}?:chanspy-invali,s,1)
 same = n,Answer
 same = n,Wait(1)
 same = n,ChanSpy(${DIALPARAM_OF_EXTEN${EXTEN:${PRILEN}}},Bq)
 same = n,Hangup


[ringroups-custom-ringgroup_default]
exten = 620,1,Wait(1)
exten = 620,n,Dial(,60,TtKkXxc)
exten = 620,n,NoOp(do..)
[ringroups-custom-0]
exten = 0,1,Wait(1)
exten = 0,n,Dial(,60,TtKkXxc)
exten = 0,n,NoOp(do..)
[ringgroups]
exten = 620,1,Goto(ringroups-custom-ringgroup_default,620,1)
exten = 0,1,Goto(ringroups-custom-0,0,1)


[conferences]
exten = 640,1,Set(MEETMEOPT=${IF($[${EXISTS(${CONF_640_ADMIN_${CALLERID(num)}})}]?${MEETMEEXTENOPT}Msa:${MEETMEEXTENOPT}Ms)})
exten = 640,2,MeetMe(${EXTEN},${MEETMEOPT})
exten = 640,3,Hangup()
exten = 641,1,Set(MEETMEOPT=${IF($[${EXISTS(${CONF_641_ADMIN_${CALLERID(num)}})}]?${MEETMEEXTENOPT}Msa:${MEETMEEXTENOPT}Ms)})
exten = 641,2,MeetMe(${EXTEN},${MEETMEOPT})
exten = 641,3,Hangup()
exten = 642,1,Set(MEETMEOPT=${IF($[${EXISTS(${CONF_642_ADMIN_${CALLERID(num)}})}]?${MEETMEEXTENOPT}Msa:${MEETMEEXTENOPT}Ms)})
exten = 642,2,MeetMe(${EXTEN},${MEETMEOPT})
exten = 642,3,Hangup()
exten = 643,1,Set(MEETMEOPT=${IF($[${EXISTS(${CONF_643_ADMIN_${CALLERID(num)}})}]?${MEETMEEXTENOPT}Msa:${MEETMEEXTENOPT}Ms)})
exten = 643,2,MeetMe(${EXTEN},${MEETMEOPT})
exten = 643,3,Hangup()
exten = 644,1,Set(MEETMEOPT=${IF($[${EXISTS(${CONF_644_ADMIN_${CALLERID(num)}})}]?${MEETMEEXTENOPT}Msa:${MEETMEEXTENOPT}Ms)})
exten = 644,2,MeetMe(${EXTEN},${MEETMEOPT})
exten = 644,3,Hangup()

[pagegroups]
exten = 630,1,Macro(pagingintercom,SIP/5000&SIP/5001&SIP/5002&SIP/5003&SIP/5004&SIP/5005&SIP/5006&SIP/5007&SIP/5008&SIP/5009&SIP/5010&SIP/5011&SIP/5012&SIP/5013&SIP/5014&SIP/5015&SIP/5016&SIP/5017&SIP/5018&SIP/5019&SIP/5020&SIP/5021&SIP/5022&SIP/5023&SIP/5024&SIP/5025&SIP/5026&SIP/5027&SIP/5028&SIP/5029&SIP/5030&SIP/5031&SIP/5032&SIP/5033&SIP/5034&SIP/5035&SIP/5036&SIP/5037&SIP/5038&SIP/5039&SIP/5040&SIP/5041&SIP/5042&SIP/5043&SIP/5044&SIP/5045&SIP/5046&SIP/5047&SIP/5048&SIP/5049,)

[CallingRule_TO_TRUNK_225]
exten = _X.,1,Set(agiresult=0)
exten = _X.,n,GotoIf($[${agiresult}=1]?play-no-balance,${EXTEN},1)
exten = _X.,n,GotoIf($[${agiresult}=2]?play-ext-disabled,${EXTEN},1)
exten = _X.,n,GotoIf($[${agiresult}=4]?ext-no-rate,${EXTEN},1)
exten = _X.,n,noop(no pinset)
exten = _X.,n(a8),Set(ORGINEXTEN=${EXTEN})
exten = _X.,n,Set(ORGINCONTEXT=${IF($[${LEN(${ORGINCONTEXT})} > 0]?${ORGINCONTEXT}: ${CONTEXT})})
exten = _X.,n,GetNextOutRouter(${ORGINCONTEXT},)
exten = _X.,n,GotoByTimeConditionOutbound(,0)
exten = _X.,n,Macro(trunkdial-failover-0.3,3,,${EXTEN:},trunk-sps-toS50_225,trunk-sps-Lync2015_41,trunk-spx-testIAX)
exten = _8.,1,Set(agiresult=0)
exten = _8.,n,GotoIf($[${agiresult}=1]?play-no-balance,${EXTEN},1)
exten = _8.,n,GotoIf($[${agiresult}=2]?play-ext-disabled,${EXTEN},1)
exten = _8.,n,GotoIf($[${agiresult}=4]?ext-no-rate,${EXTEN},1)
exten = _8.,n,noop(no pinset)
exten = _8.,n(a8),Set(ORGINEXTEN=${EXTEN})
exten = _8.,n,Set(ORGINCONTEXT=${IF($[${LEN(${ORGINCONTEXT})} > 0]?${ORGINCONTEXT}: ${CONTEXT})})
exten = _8.,n,GetNextOutRouter(${ORGINCONTEXT},)
exten = _8.,n,GotoByTimeConditionOutbound(,0)
exten = _8.,n,Macro(trunkdial-failover-0.3,3,7,${EXTEN:1},trunk-sps-toS50_225,trunk-sps-Lync2015_41,trunk-spx-testIAX)
[Mobile_CallingRule_TO_TRUNK_225]
exten = _X.,1,Set(agiresult=0)
exten = _X.,n,GotoIf($[${agiresult}=1]?play-no-balance,${EXTEN},1)
exten = _X.,n,GotoIf($[${agiresult}=2]?play-ext-disabled,${EXTEN},1)
exten = _X.,n,GotoIf($[${agiresult}=4]?ext-no-rate,${EXTEN},1)
exten = _X.,n,noop(no pinset)
exten = _X.,n(a8),Set(ORGINEXTEN=${EXTEN})
exten = _X.,n,Set(ORGINCONTEXT=${IF($[${LEN(${ORGINCONTEXT})} > 0]?${ORGINCONTEXT}: ${CONTEXT})})
exten = _X.,n,GetNextOutRouter(${ORGINCONTEXT},)
exten = _X.,n,GotoByTimeConditionOutbound(,0)
exten = _X.,n,Macro(trunkdial-failover-0.4,3,,${EXTEN:},trunk-sps-toS50_225,trunk-sps-Lync2015_41,trunk-spx-testIAX)
exten = _8.,1,Set(agiresult=0)
exten = _8.,n,GotoIf($[${agiresult}=1]?play-no-balance,${EXTEN},1)
exten = _8.,n,GotoIf($[${agiresult}=2]?play-ext-disabled,${EXTEN},1)
exten = _8.,n,GotoIf($[${agiresult}=4]?ext-no-rate,${EXTEN},1)
exten = _8.,n,noop(no pinset)
exten = _8.,n(a8),Set(ORGINEXTEN=${EXTEN})
exten = _8.,n,Set(ORGINCONTEXT=${IF($[${LEN(${ORGINCONTEXT})} > 0]?${ORGINCONTEXT}: ${CONTEXT})})
exten = _8.,n,GetNextOutRouter(${ORGINCONTEXT},)
exten = _8.,n,GotoByTimeConditionOutbound(,0)
exten = _8.,n,Macro(trunkdial-failover-0.4,3,7,${EXTEN:1},trunk-sps-toS50_225,trunk-sps-Lync2015_41,trunk-spx-testIAX)

[DLPN_SystemAlert]
include = Local_Default_CallingRules
include = CallingRule_TO_TRUNK_225
[DLPN_DialPlan601]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_601
[Mobile_DLPN_DialPlan601]
[DLPN_DialPlan5000]
include = Local_Default_CallingRules
include = CallingRule_TO_TRUNK_225
include = PhysicalDial_CallingRule_5000
[Mobile_DLPN_DialPlan5000]
include = Mobile_CallingRule_TO_TRUNK_225
[DLPN_DialPlan5001]
include = Local_Default_CallingRules
include = CallingRule_TO_TRUNK_225
include = PhysicalDial_CallingRule_5001
[Mobile_DLPN_DialPlan5001]
include = Mobile_CallingRule_TO_TRUNK_225
[DLPN_DialPlan5002]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5002
[Mobile_DLPN_DialPlan5002]
[DLPN_DialPlan5003]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5003
[Mobile_DLPN_DialPlan5003]
[DLPN_DialPlan5004]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5004
[Mobile_DLPN_DialPlan5004]
[DLPN_DialPlan5005]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5005
[Mobile_DLPN_DialPlan5005]
[DLPN_DialPlan5006]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5006
[Mobile_DLPN_DialPlan5006]
[DLPN_DialPlan5007]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5007
[Mobile_DLPN_DialPlan5007]
[DLPN_DialPlan5008]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5008
[Mobile_DLPN_DialPlan5008]
[DLPN_DialPlan5009]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5009
[Mobile_DLPN_DialPlan5009]
[DLPN_DialPlan5010]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5010
[Mobile_DLPN_DialPlan5010]
[DLPN_DialPlan5011]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5011
[Mobile_DLPN_DialPlan5011]
[DLPN_DialPlan5012]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5012
[Mobile_DLPN_DialPlan5012]
[DLPN_DialPlan5013]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5013
[Mobile_DLPN_DialPlan5013]
[DLPN_DialPlan5014]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5014
[Mobile_DLPN_DialPlan5014]
[DLPN_DialPlan5015]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5015
[Mobile_DLPN_DialPlan5015]
[DLPN_DialPlan5016]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5016
[Mobile_DLPN_DialPlan5016]
[DLPN_DialPlan5017]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5017
[Mobile_DLPN_DialPlan5017]
[DLPN_DialPlan5018]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5018
[Mobile_DLPN_DialPlan5018]
[DLPN_DialPlan5019]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5019
[Mobile_DLPN_DialPlan5019]
[DLPN_DialPlan5020]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5020
[Mobile_DLPN_DialPlan5020]
[DLPN_DialPlan5021]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5021
[Mobile_DLPN_DialPlan5021]
[DLPN_DialPlan5022]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5022
[Mobile_DLPN_DialPlan5022]
[DLPN_DialPlan5023]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5023
[Mobile_DLPN_DialPlan5023]
[DLPN_DialPlan5024]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5024
[Mobile_DLPN_DialPlan5024]
[DLPN_DialPlan5025]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5025
[Mobile_DLPN_DialPlan5025]
[DLPN_DialPlan5026]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5026
[Mobile_DLPN_DialPlan5026]
[DLPN_DialPlan5027]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5027
[Mobile_DLPN_DialPlan5027]
[DLPN_DialPlan5028]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5028
[Mobile_DLPN_DialPlan5028]
[DLPN_DialPlan5029]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5029
[Mobile_DLPN_DialPlan5029]
[DLPN_DialPlan5030]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5030
[Mobile_DLPN_DialPlan5030]
[DLPN_DialPlan5031]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5031
[Mobile_DLPN_DialPlan5031]
[DLPN_DialPlan5032]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5032
[Mobile_DLPN_DialPlan5032]
[DLPN_DialPlan5033]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5033
[Mobile_DLPN_DialPlan5033]
[DLPN_DialPlan5034]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5034
[Mobile_DLPN_DialPlan5034]
[DLPN_DialPlan5035]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5035
[Mobile_DLPN_DialPlan5035]
[DLPN_DialPlan5036]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5036
[Mobile_DLPN_DialPlan5036]
[DLPN_DialPlan5037]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5037
[Mobile_DLPN_DialPlan5037]
[DLPN_DialPlan5038]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5038
[Mobile_DLPN_DialPlan5038]
[DLPN_DialPlan5039]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5039
[Mobile_DLPN_DialPlan5039]
[DLPN_DialPlan5040]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5040
[Mobile_DLPN_DialPlan5040]
[DLPN_DialPlan5041]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5041
[Mobile_DLPN_DialPlan5041]
[DLPN_DialPlan5042]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5042
[Mobile_DLPN_DialPlan5042]
[DLPN_DialPlan5043]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5043
[Mobile_DLPN_DialPlan5043]
[DLPN_DialPlan5044]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5044
[Mobile_DLPN_DialPlan5044]
[DLPN_DialPlan5045]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5045
[Mobile_DLPN_DialPlan5045]
[DLPN_DialPlan5046]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5046
[Mobile_DLPN_DialPlan5046]
[DLPN_DialPlan5047]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5047
[Mobile_DLPN_DialPlan5047]
[DLPN_DialPlan5048]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5048
[Mobile_DLPN_DialPlan5048]
[DLPN_DialPlan5049]
include = Local_Default_CallingRules
include = PhysicalDial_CallingRule_5049
[Mobile_DLPN_DialPlan5049]

[macro-checkcallback]
exten = s,1,GotoIf(${LEN(${CALLERID(num)})}?s,2:s-nocb,1)
exten = s,2,Goto(${CALLERID(num)},1)
exten = s,3,Hangup()
exten = s-nocb,1,GotoIf(${LEN(${ARG5})}?2:6)
exten = s-nocb,2,GotoIf(${LEN(${ARG9})}?3:4)
exten = s-nocb,3,SIPAddHeader(Alert-Info: <http://192.168.254.32>\;info=${ARG10})
exten = s-nocb,4,Macro(timecondition,${ARG4},${ARG5},${ARG6},${ARG7},${ARG8},${ARG9})
exten = s-nocb,5,Hangup()
exten = s-nocb,6,Goto(from-outside,${ARG4},1)
exten = s-fxocallback,1,Macro(callback_fxo_${ARG1},${ARG3},${ARG4})
exten = s-normalcallback,1,Macro(callback_${ARG1},${ARG3},${ARG4})
exten = 74959262644,1,GotoIf(${ARG2}?s-fxocallback,1:s-normalcallback,1)
exten = _X.,1,Goto(s-nocb,1)
exten = _+.,1,Goto(s-nocb,1)
[macro-incoming_From_s50]
exten = s,1,Set(CDR(userfield)=Inbound)
exten = s,n,GotoIf(${DB_EXISTS(blacklist/${CALLERID(num)})}?Blacklist-Handle,s,1)
exten = s,n,FindForMobile(${CALLERID(num)})
exten = s,n,GotoIf($[${LEN(${MobileToExten})}>1]?mobile-exten-match,${MobileToExten},1)
exten = s,n,Set(TRUNKDID=${IF($[${ARG2}=s]?${CALLERID(name)}:${ARG2})})
exten = s,n,GotoByTimeCondition(default,Always-Hangup,s,1,,from-outside,601,1,,from-outside,5003,1,)
exten = s,102,Goto(Blacklist-Handle,s,1)

[DID_trunk_E1Trunk1]
exten = h,1,hangup()
[DID_trunk_E1Trunk2]
exten = h,1,hangup()
[DID_inbound_trunk-sps-Lync2015_41]
include = default
exten = h,1,hangup()
[DID_inbound_trunk-spx-testIAX]
include = default
exten = _.,1,Macro(incoming_From_s50,0,${EXTEN})
exten = h,1,hangup()
[DID_inbound_trunk-spx-testIAXS0]
include = default
exten = h,1,hangup()
[DID_inbound_trunk-sps-testS50]
include = default
exten = _.,1,Macro(incoming_From_s50,0,${EXTEN})
exten = h,1,hangup()
[DID_inbound_trunk-sps-toS50_225]
include = default
exten = h,1,hangup()
[from-outside]
exten = 601,1,Macro(stdexten-fromoutside,601,${DIALPARAM_OF_EXTEN601})
exten = 601,2,Voicemail(601,u)
exten = 5000,1,Macro(stdexten-fromoutside,5000,${DIALPARAM_OF_EXTEN5000})
exten = 5000,2,Voicemail(5000,u)
exten = 5001,1,Macro(stdexten-fromoutside,5001,${DIALPARAM_OF_EXTEN5001})
exten = 5001,2,Voicemail(5001,u)
exten = 5002,1,Macro(stdexten-fromoutside,5002,${DIALPARAM_OF_EXTEN5002})
exten = 5002,2,Voicemail(5002,u)
exten = 5003,1,Macro(stdexten-fromoutside,5003,${DIALPARAM_OF_EXTEN5003})
exten = 5003,2,Voicemail(5003,u)
exten = 5004,1,Macro(stdexten-fromoutside,5004,${DIALPARAM_OF_EXTEN5004})
exten = 5004,2,Voicemail(5004,u)
exten = 5005,1,Macro(stdexten-fromoutside,5005,${DIALPARAM_OF_EXTEN5005})
exten = 5005,2,Voicemail(5005,u)
exten = 5006,1,Macro(stdexten-fromoutside,5006,${DIALPARAM_OF_EXTEN5006})
exten = 5006,2,Voicemail(5006,u)
exten = 5007,1,Macro(stdexten-fromoutside,5007,${DIALPARAM_OF_EXTEN5007})
exten = 5007,2,Voicemail(5007,u)
exten = 5008,1,Macro(stdexten-fromoutside,5008,${DIALPARAM_OF_EXTEN5008})
exten = 5008,2,Voicemail(5008,u)
exten = 5009,1,Macro(stdexten-fromoutside,5009,${DIALPARAM_OF_EXTEN5009})
exten = 5009,2,Voicemail(5009,u)
exten = 5010,1,Macro(stdexten-fromoutside,5010,${DIALPARAM_OF_EXTEN5010})
exten = 5010,2,Voicemail(5010,u)
exten = 5011,1,Macro(stdexten-fromoutside,5011,${DIALPARAM_OF_EXTEN5011})
exten = 5011,2,Voicemail(5011,u)
exten = 5012,1,Macro(stdexten-fromoutside,5012,${DIALPARAM_OF_EXTEN5012})
exten = 5012,2,Voicemail(5012,u)
exten = 5013,1,Macro(stdexten-fromoutside,5013,${DIALPARAM_OF_EXTEN5013})
exten = 5013,2,Voicemail(5013,u)
exten = 5014,1,Macro(stdexten-fromoutside,5014,${DIALPARAM_OF_EXTEN5014})
exten = 5014,2,Voicemail(5014,u)
exten = 5015,1,Macro(stdexten-fromoutside,5015,${DIALPARAM_OF_EXTEN5015})
exten = 5015,2,Voicemail(5015,u)
exten = 5016,1,Macro(stdexten-fromoutside,5016,${DIALPARAM_OF_EXTEN5016})
exten = 5016,2,Voicemail(5016,u)
exten = 5017,1,Macro(stdexten-fromoutside,5017,${DIALPARAM_OF_EXTEN5017})
exten = 5017,2,Voicemail(5017,u)
exten = 5018,1,Macro(stdexten-fromoutside,5018,${DIALPARAM_OF_EXTEN5018})
exten = 5018,2,Voicemail(5018,u)
exten = 5019,1,Macro(stdexten-fromoutside,5019,${DIALPARAM_OF_EXTEN5019})
exten = 5019,2,Voicemail(5019,u)
exten = 5020,1,Macro(stdexten-fromoutside,5020,${DIALPARAM_OF_EXTEN5020})
exten = 5020,2,Voicemail(5020,u)
exten = 5021,1,Macro(stdexten-fromoutside,5021,${DIALPARAM_OF_EXTEN5021})
exten = 5021,2,Voicemail(5021,u)
exten = 5022,1,Macro(stdexten-fromoutside,5022,${DIALPARAM_OF_EXTEN5022})
exten = 5022,2,Voicemail(5022,u)
exten = 5023,1,Macro(stdexten-fromoutside,5023,${DIALPARAM_OF_EXTEN5023})
exten = 5023,2,Voicemail(5023,u)
exten = 5024,1,Macro(stdexten-fromoutside,5024,${DIALPARAM_OF_EXTEN5024})
exten = 5024,2,Voicemail(5024,u)
exten = 5025,1,Macro(stdexten-fromoutside,5025,${DIALPARAM_OF_EXTEN5025})
exten = 5025,2,Voicemail(5025,u)
exten = 5026,1,Macro(stdexten-fromoutside,5026,${DIALPARAM_OF_EXTEN5026})
exten = 5026,2,Voicemail(5026,u)
exten = 5027,1,Macro(stdexten-fromoutside,5027,${DIALPARAM_OF_EXTEN5027})
exten = 5027,2,Voicemail(5027,u)
exten = 5028,1,Macro(stdexten-fromoutside,5028,${DIALPARAM_OF_EXTEN5028})
exten = 5028,2,Voicemail(5028,u)
exten = 5029,1,Macro(stdexten-fromoutside,5029,${DIALPARAM_OF_EXTEN5029})
exten = 5029,2,Voicemail(5029,u)
exten = 5030,1,Macro(stdexten-fromoutside,5030,${DIALPARAM_OF_EXTEN5030})
exten = 5030,2,Voicemail(5030,u)
exten = 5031,1,Macro(stdexten-fromoutside,5031,${DIALPARAM_OF_EXTEN5031})
exten = 5031,2,Voicemail(5031,u)
exten = 5032,1,Macro(stdexten-fromoutside,5032,${DIALPARAM_OF_EXTEN5032})
exten = 5032,2,Voicemail(5032,u)
exten = 5033,1,Macro(stdexten-fromoutside,5033,${DIALPARAM_OF_EXTEN5033})
exten = 5033,2,Voicemail(5033,u)
exten = 5034,1,Macro(stdexten-fromoutside,5034,${DIALPARAM_OF_EXTEN5034})
exten = 5034,2,Voicemail(5034,u)
exten = 5035,1,Macro(stdexten-fromoutside,5035,${DIALPARAM_OF_EXTEN5035})
exten = 5035,2,Voicemail(5035,u)
exten = 5036,1,Macro(stdexten-fromoutside,5036,${DIALPARAM_OF_EXTEN5036})
exten = 5036,2,Voicemail(5036,u)
exten = 5037,1,Macro(stdexten-fromoutside,5037,${DIALPARAM_OF_EXTEN5037})
exten = 5037,2,Voicemail(5037,u)
exten = 5038,1,Macro(stdexten-fromoutside,5038,${DIALPARAM_OF_EXTEN5038})
exten = 5038,2,Voicemail(5038,u)
exten = 5039,1,Macro(stdexten-fromoutside,5039,${DIALPARAM_OF_EXTEN5039})
exten = 5039,2,Voicemail(5039,u)
exten = 5040,1,Macro(stdexten-fromoutside,5040,${DIALPARAM_OF_EXTEN5040})
exten = 5040,2,Voicemail(5040,u)
exten = 5041,1,Macro(stdexten-fromoutside,5041,${DIALPARAM_OF_EXTEN5041})
exten = 5041,2,Voicemail(5041,u)
exten = 5042,1,Macro(stdexten-fromoutside,5042,${DIALPARAM_OF_EXTEN5042})
exten = 5042,2,Voicemail(5042,u)
exten = 5043,1,Macro(stdexten-fromoutside,5043,${DIALPARAM_OF_EXTEN5043})
exten = 5043,2,Voicemail(5043,u)
exten = 5044,1,Macro(stdexten-fromoutside,5044,${DIALPARAM_OF_EXTEN5044})
exten = 5044,2,Voicemail(5044,u)
exten = 5045,1,Macro(stdexten-fromoutside,5045,${DIALPARAM_OF_EXTEN5045})
exten = 5045,2,Voicemail(5045,u)
exten = 5046,1,Macro(stdexten-fromoutside,5046,${DIALPARAM_OF_EXTEN5046})
exten = 5046,2,Voicemail(5046,u)
exten = 5047,1,Macro(stdexten-fromoutside,5047,${DIALPARAM_OF_EXTEN5047})
exten = 5047,2,Voicemail(5047,u)
exten = 5048,1,Macro(stdexten-fromoutside,5048,${DIALPARAM_OF_EXTEN5048})
exten = 5048,2,Voicemail(5048,u)
exten = 5049,1,Macro(stdexten-fromoutside,5049,${DIALPARAM_OF_EXTEN5049})
exten = 5049,2,Voicemail(5049,u)

;param1-queue name, param2-queue pass, param3-exten name
[macro-queue-login]
exten = s,1,Wait(1)
exten = s,n,GotoIf(${ARG2}?3:4)
exten = s,n,Authenticate(${ARG2})
exten = s,n,AddQueueMember(${ARG1},,,,${ARG3})
exten = s,n,Playback(agent-loginok)
exten = s,n,Playback(vm-goodbye)
exten = s,n,Hangup()
;param1-queue name
[macro-queue-logout]
exten = s,1,Wait(1)
exten = s,n,RemoveQueueMember(${ARG1})
exten = s,n,Playback(agent-loggedoff)
exten = s,n,Playback(vm-goodbye)
exten = s,n,Hangup()
[queue-680]
exten = 680,1,Answer()
exten = 680,n,NoOp(no set join announce)
exten = 680,n,Queue(queue-680,tTkKXx,,,1800)
exten = 680,n,Hangup

[queues]
exten = 680,1,Goto(queue-680,680,1)
exten = 680*,1,Macro(queue-login,queue-680,,${CONTEXT:13})
exten = 680**,1,Macro(queue-logout,queue-680,${CONTEXT:13})


[t38-recvfax]
exten = _X.,1,Answer()
exten = _X.,n,Wait(3)
exten = _X.,n,Set(SENDMAIL=0)
exten = _X.,n,Set(MAILOWNER=${EXTEN})
exten = _X.,n,Set(FAXFROM=${IF($[${LEN(${CALLERID(num)})} > 0]?${CALLERID(num)}: Unknown)})
exten = _X.,n,Set(FAXFILE=/home/fax/${EXTEN}-${STRFTIME(,,%Y%m%d-%H%M)}-${RAND(1)}.tiff)
exten = _X.,n,ReceiveFAX(${FAXFILE})
exten = _X.,n,Set(SENDMAIL=1)
exten = _X.,n,System(/bin/ccsmtp mypbx@sina.com ${EMAILADDR_${MAILOWNER}} ${FAXFROM} ${FAXFILE})
exten = _X.,n,System(rm ${FAXFILE})
exten = _X.,n,Hangup()
exten = h,1,GotoIf($[${SENDMAIL}=0]?2:3)
exten = h,2,System(/bin/ccsmtp mypbx@sina.com ${EMAILADDR_${MAILOWNER}} ${FAXFROM} ${FAXFILE})
exten = h,3,System(rm ${FAXFILE})
exten = h,4,Hangup()
[t38-faxgateway-t30]
exten = 601,1,FaxGateway(DAHDI/63,${RINGTIME})
[detect-fax-to-email]
exten = s,1,NOOP(ready fax to ${FAXTOEMAIL_ADDR})
exten = s,n,GotoIf(${LEN(${FAX_TO_FXS})}>0?from-outside,${FAX_TO_FXS},1)
exten = s,n,Set(SENDMAIL=0)
exten = s,n,Set(FAXFROM=${IF($[${LEN(${CALLERID(num)})} > 0]?${CALLERID(num)}: Unknown)})
exten = s,n,Set(FAXFILE=/home/fax/${FAXFROM}-${STRFTIME(,,%Y%m%d-%H%M)}-${RAND(1)}.tiff)
exten = s,n,ReceiveFAX(${FAXFILE})
exten = s,n,Set(SENDMAIL=1)
exten = s,n,System(/bin/ccsmtp mypbx@sina.com ${FAXTOEMAIL_ADDR} ${FAXFROM} ${FAXFILE})
exten = s,n,System(rm ${FAXFILE})
exten = s,n,Hangup()
exten = h,1,GotoIf($[${SENDMAIL}=0]?2:3)
exten = h,2,System(/bin/ccsmtp mypbx@sina.com ${FAXTOEMAIL_ADDR} ${FAXFROM} ${FAXFILE})
exten = h,3,System(rm ${FAXFILE})
exten = h,4,Hangup()

[account-code-check]
exten = *89,1,NoOp(pin user check)
exten = *89,n,Answer
exten = *89,n,Read(userpin,record/pinuser-entry,10)
exten = *89,n,NoOp(${userpin})
exten = *89,n,Set(PINUSER_CONTEXT=${CONTEXT})
exten = *89,n,Set(TRANSFER_CONTEXT=${CONTEXT})
exten = *89,n,Goto(account-code-match,${userpin},1)
[account-code-match]
exten = i,1,Playback(record/pinuser-error)
exten = i,n,Hangup
[speed-dial-match]
exten = _*99.,1,Set(SdNum=${DB(speeddial/${EXTEN})})
exten = _*99.,n,GotoIf(${LEN(${SdNum})}>0?${CONTEXT},${SdNum},1)
[en-force-to-outside]
exten = *81,1,Answer
exten = *81,n,Set(DB(OfficeHours/ForceToOutside)=1)
exten = *81,n,GotoByTimeConditionBLFWork()
exten = *81,n,Wait(1)
exten = *81,n,Playback(beep)
exten = *81,n,Wait(1)
exten = *81,n,Hangup()
[dis-force-to-outside]
exten = *081,1,Answer
exten = *081,n,Set(DB(OfficeHours/ForceToOutside)=0)
exten = *081,n,GotoByTimeConditionBLFWork()
exten = *081,n,Wait(1)
exten = *081,n,Playback(beep)
exten = *081,n,Wait(1)
exten = *081,n,Hangup()
[en-force-to-inside]
exten = *82,1,Answer
exten = *82,n,Set(DB(OfficeHours/ForceToOutside)=2)
exten = *82,n,GotoByTimeConditionBLFWork()
exten = *82,n,Wait(1)
exten = *82,n,Playback(beep)
exten = *82,n,Wait(1)
exten = *82,n,Hangup()
[hintcontext]
include = park-hints
include = trunks-hintcontext
include = extensions-hintcontext
[trunks-hintcontext]
exten = pstn2,hint,DAHDI/64
exten = UMTS3,hint,YSGSM/65
exten = E1Trunk1,hint,DAHDI/g11
exten = E1Trunk2,hint,DAHDI/g12
exten = BriTrunk5,hint,DAHDI/68
exten = BriTrunk6,hint,DAHDI/71
exten = Lync2015_41,hint,SIP/trunk-sps-Lync2015_41
exten = testIAX,hint,IAX2/trunk-spx-testIAX
exten = testIAXS0,hint,IAX2/trunk-spx-testIAXS0
exten = testS50,hint,SIP/trunk-sps-testS50
exten = toS50_225,hint,SIP/trunk-sps-toS50_225
exten = default,hint,SIP/trunk-sps-default

[extensions-hintcontext]
exten = 601,hint,DAHDI/63
exten = 5000,hint,SIP/5000
exten = 5001,hint,SIP/5001
exten = 5002,hint,SIP/5002
exten = 5003,hint,SIP/5003
exten = 5004,hint,SIP/5004
exten = 5005,hint,SIP/5005
exten = 5006,hint,SIP/5006
exten = 5007,hint,SIP/5007
exten = 5008,hint,SIP/5008
exten = 5009,hint,SIP/5009
exten = 5010,hint,SIP/5010
exten = 5011,hint,SIP/5011
exten = 5012,hint,SIP/5012
exten = 5013,hint,SIP/5013
exten = 5014,hint,SIP/5014
exten = 5015,hint,SIP/5015
exten = 5016,hint,SIP/5016
exten = 5017,hint,SIP/5017
exten = 5018,hint,SIP/5018
exten = 5019,hint,SIP/5019
exten = 5020,hint,SIP/5020
exten = 5021,hint,SIP/5021
exten = 5022,hint,SIP/5022
exten = 5023,hint,SIP/5023
exten = 5024,hint,SIP/5024
exten = 5025,hint,SIP/5025
exten = 5026,hint,SIP/5026
exten = 5027,hint,SIP/5027
exten = 5028,hint,SIP/5028
exten = 5029,hint,SIP/5029
exten = 5030,hint,SIP/5030
exten = 5031,hint,SIP/5031
exten = 5032,hint,SIP/5032
exten = 5033,hint,SIP/5033
exten = 5034,hint,SIP/5034
exten = 5035,hint,SIP/5035
exten = 5036,hint,SIP/5036
exten = 5037,hint,SIP/5037
exten = 5038,hint,SIP/5038
exten = 5039,hint,SIP/5039
exten = 5040,hint,SIP/5040
exten = 5041,hint,SIP/5041
exten = 5042,hint,SIP/5042
exten = 5043,hint,SIP/5043
exten = 5044,hint,SIP/5044
exten = 5045,hint,SIP/5045
exten = 5046,hint,SIP/5046
exten = 5047,hint,SIP/5047
exten = 5048,hint,SIP/5048
exten = 5049,hint,SIP/5049
[park-hints]
exten => 690,1,ParkedCall(690)
exten => 690,hint,park:690@parkedcalls
exten => 691,1,ParkedCall(691)
exten => 691,hint,park:691@parkedcalls
exten => 692,1,ParkedCall(692)
exten => 692,hint,park:692@parkedcalls
exten => 693,1,ParkedCall(693)
exten => 693,hint,park:693@parkedcalls
exten => 694,1,ParkedCall(694)
exten => 694,hint,park:694@parkedcalls
exten => 695,1,ParkedCall(695)
exten => 695,hint,park:695@parkedcalls
exten => 696,1,ParkedCall(696)
exten => 696,hint,park:696@parkedcalls
exten => 697,1,ParkedCall(697)
exten => 697,hint,park:697@parkedcalls
exten => 698,1,ParkedCall(698)
exten => 698,hint,park:698@parkedcalls

[mobile-exten-match]
[dynamic-threeway-invite]
exten = 0,1,noop(dynamic-threeway-invite)
exten = 0,n,Read(DEST,dial,,i)
exten = 0,n,Set(DYNAMIC_FEATURES=twinvite#twend)
exten = 0,n,Dial(Local/${DEST}@dynamic-threeway-dest,,g)
exten = 0,n,Set(DYNAMIC_FEATURES=)
exten = 0,n,Goto(dynamic-threeway,8600,1)
exten = i,1,Goto(dynamic-threeway,8600,1)

[dynamic-threeway-dest]
exten = _X.,1,noop(dynamic-threeway-dest)
exten = _X.,n,Dial(SIP/${EXTEN})

[dynamic-threeway]
exten = _XXXX,1,noop(dynamic-threeway)
exten = _XXXX,n,Answer
exten = _XXXX,n,Set(MEETME_EXIT_CONTEXT=dynamic-threeway-invite)
exten = _XXXX,n,Set(DYNAMIC_FEATURES=twinvite#twend)
exten = _XXXX,n,MeetMe(${EXTEN},pdMX)
exten = _XXXX,n,Set(DYNAMIC_FEATURES=)
exten = _XXXX,n,Hangup

[macro-mtwstart]
exten = s,1,noop(macro-mtwstart)
exten = s,n,Set(CONFNO=8600)
exten = s,n,ChannelRedirect(${BRIDGEPEER},dynamic-threeway,${CONFNO},1)
exten = s,n,Read(DEST,Dial,,i)
exten = s,n,Set(DYNAMIC_FEATURES=twinvite#twend)
exten = s,n,Dial(Local/${DEST}@dynamic-threeway-dest,,gtT)
exten = s,n,Set(DYNAMIC_FEATURES=)
exten = s,n,MeetMe(${CONFNO},pdMX)
exten = s,n,Goto(dynamic-threeway,${CONFNO},1)

[macro-mtwinvite]
exten = s,1,noop(macro-mthreeway-inv)
exten = s,n,ChannelRedirect(${BRIDGEPEER},dynamic-threeway,8600,1)

[macro-mtwend]
exten = s,1,noop(macro-mthreeway-noinv)
exten = s,n,SoftHangup(${BRIDGEPEER})

[cti-conference]
exten = _.,1,MeetMe(${EXTEN},Ms)

[cti-playfile]
exten = _.,1,Playback(${var1})
exten = _.,n,Hangup

[fax-extens]

[dial-ip-call]
exten = _X.,1,Dial(SIP/${DIALIP}/${EXTEN},${RINGTIME},${DIALOPTIONS})
exten = _X.,2,Hangup()
[dial-auto-answer]
exten = _X.,1,SIPAddHeader(Alert-Info:Ring Answer)
exten = _X.,n,SIPAddHeader(Call-Info:<uri>\;answer-after=0)
exten = _X.,n,Dial(${DIALPARAM_OF_EXTEN${EXTEN}},${RINGTIME},${DIALOPTIONS})
exten = _X.,n,Hangup
exten = h,1,Hangup
[pbxapi-normal-spy]
exten = _wormalX.,1,Noop(going to spy)
 same = n,GotoIf(${DB_EXISTS(allowspy/${EXTEN:6})}?:chanspy-invalid,s,1)
 same = n,Answer
 same = n,Wait(1)
 same = n,ChanSpy(${SPYCHANNELPREFIX},q)
 same = n,Hangup
[pbxapi-whisper-spy]
exten = _whisperX.,1,Noop(going to spy)
 same = n,GotoIf(${DB_EXISTS(allowspy/${EXTEN:7})}?:chanspy-invalid,s,1)
 same = n,Answer
 same = n,Wait(1)
 same = n,ChanSpy(${SPYCHANNELPREFIX},q)
 same = n,Hangup
[pbxapi-barge-spy]
exten = _barge.,1,Noop(going to spy)
 same = n,GotoIf(${DB_EXISTS(allowspy/${EXTEN:5})}?:chanspy-invalid,s,1)
 same = n,Answer
 same = n,Wait(1)
 same = n,ChanSpy(${SPYCHANNELPREFIX},Bq)
 same = n,Hangup

